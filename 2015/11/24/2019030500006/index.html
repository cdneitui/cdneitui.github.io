<!doctype html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=11,IE=10,IE=9,IE=8">
    <meta name="baidu-site-verification" content="dIcXMeY8Ya">
    
    <title>CentOS7安装redis | 软件开发吧</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <meta name="keywords" content="Jelon, 前端, Web, 张德龙, 前端开发">
    <meta name="description" content="Jelon个人前端小站">

    
    <link rel="alternative" href="/atom.xml" title="软件开发吧" type="application/atom+xml">
    
    
    <link rel="shortcut icon" href="/favicon.ico">
    
    <link rel="stylesheet" href="/css/style.css">
    <!--[if lt IE 9]>
    <script src="/js/html5.js"></script>
    <![endif]-->
    
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?fd459238242776d173cdc64918fb32f2";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>


</head>
</html>
<body class="home">
    <!--[if lt IE 9]>
    <div class="browsehappy">
        当前网页 <strong>不支持</strong>
        你正在使用的浏览器. 为了正常的访问, 请 <a href="http://browsehappy.com/">升级你的浏览器</a>.
    </div>
    <![endif]-->

    <!-- 博客头部 -->
    <header class="header">
    <section class="container header-main">
        <div class="logo">
            <a href="/">
                <div class="cover">
                    <span class="name">软件开发吧</span>
                    <span class="description"></span>
                </div>
            </a>
        </div>
        <div class="dropnav icon-paragraph-justify" id="JELON__btnDropNav"></div>
        <ul class="menu hidden" id="JELON__menu">
            
            <li rel="/2015/11/24/2019030500006/index.html" class="item ">
                <a href="/" title="首页" class="icon-home">&nbsp;首页</a>
            </li>
            
            <li rel="/2015/11/24/2019030500006/index.html" class="item ">
                <a href="/lab/" title="实验室" class="icon-lab">&nbsp;实验室</a>
            </li>
            
            <li rel="/2015/11/24/2019030500006/index.html" class="item ">
                <a href="/about/" title="关于" class="icon-about">&nbsp;关于</a>
            </li>
            
            <li rel="/2015/11/24/2019030500006/index.html" class="item ">
                <a href="/comment/" title="留言" class="icon-comment">&nbsp;留言</a>
            </li>
            
        </ul>
        <div class="profile clearfix">
            <div class="feeds fl">
                
                
                <p class="links">
                    
                        <a href="https://github.com/jangdelong" target="_blank">Github</a>
                        |
                    
                        <a href="https://pages.coding.me" target="_blank">Hosted by Coding Pages</a>
                        
                    
                </p>
                <p class="sns">
                    
                        <a href="http://weibo.com/jangdelong" class="sinaweibo" target="_blank"><b>■</b> 新浪微博</a>
                    
                        <a href="https://www.facebook.com/profile.php?id=100011855760219&amp;ref=bookmarks" class="qqweibo" target="_blank"><b>■</b> Facebook</a>
                    
                    <a href="javascript: void(0);" class="wechat">
                        <b>■</b>
                        公众号
                        <span class="popover">
                            <img src="/img/wechat_mp.jpg" width="120" height="120" alt="我的微信订阅号">
                            <i class="arrow"></i>
                        </span>
                    </a>
                </p>
                
            </div>
            <div class="avatar fr">
                <img src="/img/jelon.jpg" alt="avatar" title="Jelon">
            </div>
        </div>
    </section>
</header>


    <!-- 博客正文 -->
    <div class="container body clearfix">
        <section class="content">
            <div class="content-main widget">
                <!-- 文章页 -->
<!-- 文章 -->
<article class="post article">
    <header class="text-center">
        <h3 class="post-title"><span>CentOS7安装redis</span></h3>
    </header>
    <p class="post-meta text-center">
        Jelon 发表于
        <time datetime="2015-11-24T07:09:26.000Z">2015-11-24</time>
    </p>
    <div class="post-content">
        <p>本文介绍在CentOS7上安装redis数据库。 系统配置信息如下：  </p>
<p>C代码</p>
<ol>
<li>[linus@localhost ~]$ uname -r</li>
<li>3.10.0-229.20.1.el7.x86_64</li>
<li>[linus@localhost ~]$ more /etc/redhat-release</li>
<li>CentOS Linux release 7.1.1503 (Core)</li>
<li>[linus@localhost ~]$</li>
</ol>
<h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><p>1、下载Redis，当前最新版本是3.0.5，然后安装。</p>
<ol>
<li>[linus@localhost redis]$ wget <a href="http://download.redis.io/releases/redis-3.0.5.tar.gz" target="_blank" rel="noopener">http://download.redis.io/releases/redis-3.0.5.tar.gz</a></li>
<li>–2015-11-24 13:33:32–  <a href="http://download.redis.io/releases/redis-3.0.5.tar.gz" target="_blank" rel="noopener">http://download.redis.io/releases/redis-3.0.5.tar.gz</a></li>
<li>Resolving download.redis.io (download.redis.io)… 109.74.203.151</li>
<li>Connecting to download.redis.io (download.redis.io)|109.74.203.151|:80… connected.</li>
<li>HTTP request sent, awaiting response… 200 OK</li>
<li>Length: 1366160 (1.3M) [application/x-gzip]</li>
<li><p>Saving to: ‘redis-3.0.5.tar.gz’</p>
</li>
<li><p>100%[==============================================&gt;] 1,366,160   40.0KB/s   in 25s</p>
</li>
<li><p>2015-11-24 13:33:58 (54.1 KB/s) - ‘redis-3.0.5.tar.gz’ saved [1366160/1366160]</p>
</li>
<li><p>[linus@localhost redis]$</p>
</li>
<li>[linus@localhost redis]$ ls</li>
<li>redis-3.0.5.tar.gz</li>
<li>[linus@localhost redis]$ tar -zxf redis-3.0.5.tar.gz</li>
<li>[linus@localhost redis]$ cd redis-3.0.5/</li>
<li>[linus@localhost redis-3.0.5]$ make</li>
<li>cd src &amp;&amp; make all</li>
<li>make[1]: Entering directory `/home/linus/redis/redis-3.0.5/src’</li>
<li>rm -rf redis-server redis-sentinel redis-cli redis-benchmark redis-check-dump redis-check-aof <em>.o </em>.gcda <em>.gcno </em>.gcov redis.info lcov-html</li>
<li>(cd ../deps &amp;&amp; make distclean)</li>
<li>make[2]: Entering directory `/home/linus/redis/redis-3.0.5/deps’</li>
<li>(cd hiredis &amp;&amp; make clean) &gt; /dev/null || true</li>
<li>(cd linenoise &amp;&amp; make clean) &gt; /dev/null || true</li>
<li>(cd lua &amp;&amp; make clean) &gt; /dev/null || true</li>
<li>(cd jemalloc &amp;&amp; [ -f Makefile ] &amp;&amp; make distclean) &gt; /dev/null || true</li>
<li>(rm -f .make-*)</li>
<li>make[2]: Leaving directory `/home/linus/redis/redis-3.0.5/deps’</li>
<li>(rm -f .make-*)</li>
<li>echo STD=-std=c99 -pedantic &gt;&gt; .make-settings</li>
<li>echo WARN=-Wall -W &gt;&gt; .make-settings</li>
<li>echo OPT=-O2 &gt;&gt; .make-settings</li>
<li>echo MALLOC=jemalloc &gt;&gt; .make-settings</li>
<li>echo CFLAGS= &gt;&gt; .make-settings</li>
<li>echo LDFLAGS= &gt;&gt; .make-settings</li>
<li>echo REDIS_CFLAGS= &gt;&gt; .make-settings</li>
<li>echo REDIS_LDFLAGS= &gt;&gt; .make-settings</li>
<li>echo PREV_FINAL_CFLAGS=-std=c99 -pedantic -Wall -W -O2 -g -ggdb   -I../deps/hiredis -I../deps/linenoise -I../deps/lua/src -DUSE_JEMALLOC -I../deps/jemalloc/include &gt;&gt; .make-settings</li>
<li>echo PREV_FINAL_LDFLAGS=  -g -ggdb -rdynamic &gt;&gt; .make-settings</li>
<li>。。。</li>
<li>。。。</li>
<li>LINK redis-server</li>
<li>INSTALL redis-sentinel</li>
<li>CC redis-cli.o</li>
<li>LINK redis-cli</li>
<li>CC redis-benchmark.o</li>
<li>LINK redis-benchmark</li>
<li>CC redis-check-dump.o</li>
<li>LINK redis-check-dump</li>
<li>CC redis-check-aof.o</li>
<li><p>LINK redis-check-aof</p>
</li>
<li><p>Hint: It’s a good idea to run ‘make test’ ;)</p>
</li>
<li><p>make[1]: Leaving directory `/home/linus/redis/redis-3.0.5/src’</p>
</li>
</ol>
<p>然后执行make test进行验证，报如下错误，安装tcl之后就可以正常执行了：</p>
<ol>
<li>[linus@localhost redis-3.0.5]$ make test</li>
<li>cd src &amp;&amp; make test</li>
<li>make[1]: Entering directory `/home/linus/redis/redis-3.0.5/src’</li>
<li>You need tcl 8.5 or newer in order to run the Redis test</li>
<li>make[1]: *** [test] Error 1</li>
<li>make[1]: Leaving directory `/home/linus/redis/redis-3.0.5/src’</li>
<li>make: *** [test] Error 2</li>
<li>[linus@localhost redis-3.0.5]$ make test</li>
<li>…</li>
<li>…</li>
<li><p>The End</p>
</li>
<li><p>Execution time of different units:</p>
</li>
<li>1 seconds - unit/printver</li>
<li>2 seconds - unit/scan</li>
<li>2 seconds - unit/quit</li>
<li>3 seconds - unit/auth</li>
<li>3 seconds - unit/multi</li>
<li>5 seconds - unit/protocol</li>
<li>11 seconds - unit/expire</li>
<li>21 seconds - unit/type/list</li>
<li>35 seconds - unit/other</li>
<li>40 seconds - unit/type/list-2</li>
<li>19 seconds - integration/aof</li>
<li>41 seconds - unit/type/hash</li>
<li>42 seconds - unit/dump</li>
<li>3 seconds - integration/logging</li>
<li>2 seconds - unit/pubsub</li>
<li>8 seconds - integration/rdb</li>
<li>3 seconds - unit/slowlog</li>
<li>2 seconds - unit/introspection</li>
<li>6 seconds - integration/convert-zipmap-hash-on-load</li>
<li>2 seconds - unit/limits</li>
<li>12 seconds - unit/scripting</li>
<li>19 seconds - unit/bitops</li>
<li>67 seconds - unit/type/set</li>
<li>72 seconds - integration/replication-2</li>
<li>30 seconds - unit/memefficiency</li>
<li>77 seconds - unit/type/zset</li>
<li>79 seconds - unit/sort</li>
<li>79 seconds - unit/aofrw</li>
<li>84 seconds - unit/basic</li>
<li>42 seconds - unit/maxmemory</li>
<li>91 seconds - unit/type/list-3</li>
<li>117 seconds - integration/replication-4</li>
<li>67 seconds - unit/hyperloglog</li>
<li>122 seconds - integration/replication-3</li>
<li>137 seconds - integration/replication</li>
<li>134 seconds - integration/replication-psync</li>
<li><p>114 seconds - unit/obuf-limits</p>
</li>
<li><p>\o/ All tests passed without errors!</p>
</li>
<li><p>Cleanup: may take some time… OK</p>
</li>
<li>make[1]: Leaving directory `/home/linus/redis/redis-3.0.5/src’</li>
<li>[linus@localhost redis-3.0.5]$</li>
</ol>
<p>安装完成后，可以切换src目录下，执行redis-server命令启动redis服务器：  </p>
<ol>
<li>[linus@localhost src]$ ./redis-server &amp;</li>
<li>[1] 8921</li>
<li>[linus@localhost src]$ 8921:C 24 Nov 13:44:17.995 # Warning: no config file specified, using the default config. In order to specify a config file use ./redis-server /path/to/redis.conf</li>
<li>8921:M 24 Nov 13:44:17.997 # You requested maxclients of 10000 requiring at least 10032 max file descriptors.</li>
<li>8921:M 24 Nov 13:44:17.997 # Redis can’t set maximum open files to 10032 because of OS error: Operation not permitted.</li>
<li>8921:M 24 Nov 13:44:17.997 # Current maximum open files is 4096. maxclients has been reduced to 4064 to compensate for low ulimit. If you need higher maxclients increase ‘ulimit -n’.</li>
<li>_._</li>
<li><em>.-<code></code>__ ‘’-.</em></li>
<li><em>.-<code></code>    <code>.</code></em>.  ‘’-._           Redis 3.0.5 (00000000/0) 64 bit</li>
<li>.-<code>.-`</code>.  <code>`</code>\/    _.,_ ‘’-._</li>
<li>(    ‘      ,       .-<code>|</code>,    )     Running in standalone mode</li>
<li>|<code>-._</code>-…-<code>__...-.`</code>-._|’` _.-‘|     Port: 6379</li>
<li>|    <code>-._</code>._    /     _.-‘    |     PID: 8921</li>
<li><code>-._</code>-._  `-./  _.-‘    _.-‘</li>
<li>|<code>-._</code>-._    `-.__.-‘    <em>.-‘</em>.-‘|</li>
<li>|    <code>-._</code>-._        <em>.-‘</em>.-‘    |           <a href="http://redis.io" target="_blank" rel="noopener">http://redis.io</a>        </li>
<li><code>-._</code>-.<em>`-.__.-‘</em>.-‘    _.-‘</li>
<li>|<code>-._</code>-._    `-.__.-‘    <em>.-‘</em>.-‘|</li>
<li>|    <code>-._</code>-._        <em>.-‘</em>.-‘    |</li>
<li><code>-._</code>-.<em>`-.__.-‘</em>.-‘    _.-‘</li>
<li><code>-._</code>-.__.-‘    _.-‘</li>
<li>`-._        _.-‘</li>
<li><p>`-.__.-‘</p>
</li>
<li><p>8921:M 24 Nov 13:44:17.998 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.</p>
</li>
<li>8921:M 24 Nov 13:44:17.999 # Server started, Redis version 3.0.5</li>
<li>8921:M 24 Nov 13:44:17.999 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add ‘vm.overcommit_memory = 1’ to /etc/sysctl.conf and then reboot or run the command ‘sysctl vm.overcommit_memory=1’ for this to take effect.</li>
<li>8921:M 24 Nov 13:44:17.999 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command ‘echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled’ as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.</li>
<li>8921:M 24 Nov 13:44:17.999 * DB loaded from disk: 0.000 seconds</li>
<li><p>8921:M 24 Nov 13:44:17.999 * The server is now ready to accept connections on port 6379</p>
<p>此时可以通过redis-cli命令连接该redis服务器，并且可以通过SHUTDOWN命令关闭服务器：</p>
</li>
<li><p>[linus@localhost src]$ ./redis-cli</p>
</li>
<li>127.0.0.1:6379&gt; INFO</li>
<li><h1 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h1></li>
<li>redis_version:3.0.5</li>
<li>redis_git_sha1:00000000</li>
<li>redis_git_dirty:0</li>
<li>redis_build_id:cdf25f7608cc4cbe</li>
<li>redis_mode:standalone</li>
<li>os:Linux 3.10.0-229.20.1.el7.x86_64 x86_64</li>
<li>arch_bits:64</li>
<li>multiplexing_api:epoll</li>
<li>gcc_version:4.8.3</li>
<li>process_id:8921</li>
<li>run_id:c4bf78bec7e54a517634bb62430406946c91733d</li>
<li>tcp_port:6379</li>
<li>uptime_in_seconds:104</li>
<li>uptime_in_days:0</li>
<li>hz:10</li>
<li>lru_clock:5503385</li>
<li><p>config_file:</p>
</li>
<li><h1 id="Clients"><a href="#Clients" class="headerlink" title="Clients"></a>Clients</h1></li>
<li>connected_clients:1</li>
<li>client_longest_output_list:0</li>
<li>client_biggest_input_buf:0</li>
<li><p>blocked_clients:0</p>
</li>
<li><h1 id="Memory"><a href="#Memory" class="headerlink" title="Memory"></a>Memory</h1></li>
<li>used_memory:508712</li>
<li>used_memory_human:496.79K</li>
<li>used_memory_rss:8024064</li>
<li>used_memory_peak:508712</li>
<li>used_memory_peak_human:496.79K</li>
<li>used_memory_lua:36864</li>
<li>mem_fragmentation_ratio:15.77</li>
<li><p>mem_allocator:jemalloc-3.6.0</p>
</li>
<li><h1 id="Persistence"><a href="#Persistence" class="headerlink" title="Persistence"></a>Persistence</h1></li>
<li>loading:0</li>
<li>rdb_changes_since_last_save:0</li>
<li>rdb_bgsave_in_progress:0</li>
<li>rdb_last_save_time:1448343857</li>
<li>rdb_last_bgsave_status:ok</li>
<li>rdb_last_bgsave_time_sec:-1</li>
<li>rdb_current_bgsave_time_sec:-1</li>
<li>aof_enabled:0</li>
<li>aof_rewrite_in_progress:0</li>
<li>aof_rewrite_scheduled:0</li>
<li>aof_last_rewrite_time_sec:-1</li>
<li>aof_current_rewrite_time_sec:-1</li>
<li>aof_last_bgrewrite_status:ok</li>
<li><p>aof_last_write_status:ok</p>
</li>
<li><h1 id="Stats"><a href="#Stats" class="headerlink" title="Stats"></a>Stats</h1></li>
<li>total_connections_received:1</li>
<li>total_commands_processed:0</li>
<li>instantaneous_ops_per_sec:0</li>
<li>total_net_input_bytes:14</li>
<li>total_net_output_bytes:0</li>
<li>instantaneous_input_kbps:0.00</li>
<li>instantaneous_output_kbps:0.00</li>
<li>rejected_connections:0</li>
<li>sync_full:0</li>
<li>sync_partial_ok:0</li>
<li>sync_partial_err:0</li>
<li>expired_keys:0</li>
<li>evicted_keys:0</li>
<li>keyspace_hits:0</li>
<li>keyspace_misses:0</li>
<li>pubsub_channels:0</li>
<li>pubsub_patterns:0</li>
<li>latest_fork_usec:0</li>
<li><p>migrate_cached_sockets:0</p>
</li>
<li><h1 id="Replication"><a href="#Replication" class="headerlink" title="Replication"></a>Replication</h1></li>
<li>role:master</li>
<li>connected_slaves:0</li>
<li>master_repl_offset:0</li>
<li>repl_backlog_active:0</li>
<li>repl_backlog_size:1048576</li>
<li>repl_backlog_first_byte_offset:0</li>
<li><p>repl_backlog_histlen:0</p>
</li>
<li><h1 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h1></li>
<li>used_cpu_sys:0.10</li>
<li>used_cpu_user:0.04</li>
<li>used_cpu_sys_children:0.00</li>
<li><p>used_cpu_user_children:0.00</p>
</li>
<li><h1 id="Cluster"><a href="#Cluster" class="headerlink" title="Cluster"></a>Cluster</h1></li>
<li><p>cluster_enabled:0</p>
</li>
<li><h1 id="Keyspace"><a href="#Keyspace" class="headerlink" title="Keyspace"></a>Keyspace</h1></li>
<li>127.0.0.1:6379&gt;</li>
<li>127.0.0.1:6379&gt; SHUTDOWN</li>
<li><p>not connected&gt;</p>
</li>
<li><p>服务器端会打印：</p>
</li>
<li>8921:M 24 Nov 13:46:52.838 # User requested shutdown…</li>
<li>8921:M 24 Nov 13:46:52.838 * Saving the final RDB snapshot before exiting.</li>
<li>8921:M 24 Nov 13:46:52.844 * DB saved on disk</li>
<li>8921:M 24 Nov 13:46:52.844 # Redis is now ready to exit, bye bye…</li>
</ol>
<p>服务器端配置：   最关键的配置以下选项：</p>
<ol>
<li><h1 id="By-default-Redis-does-not-run-as-a-daemon-Use-‘yes’-if-you-need-it"><a href="#By-default-Redis-does-not-run-as-a-daemon-Use-‘yes’-if-you-need-it" class="headerlink" title="By default Redis does not run as a daemon. Use ‘yes’ if you need it."></a>By default Redis does not run as a daemon. Use ‘yes’ if you need it.</h1></li>
<li><h1 id="Note-that-Redis-will-write-a-pid-file-in-var-run-redis-pid-when-daemonized"><a href="#Note-that-Redis-will-write-a-pid-file-in-var-run-redis-pid-when-daemonized" class="headerlink" title="Note that Redis will write a pid file in /var/run/redis.pid when daemonized."></a>Note that Redis will write a pid file in /var/run/redis.pid when daemonized.</h1></li>
<li>daemonize yes</li>
<li><h1 id="Specify-the-server-verbosity-level"><a href="#Specify-the-server-verbosity-level" class="headerlink" title="Specify the server verbosity level."></a>Specify the server verbosity level.</h1></li>
<li><h1 id="This-can-be-one-of"><a href="#This-can-be-one-of" class="headerlink" title="This can be one of:"></a>This can be one of:</h1></li>
<li><h1 id="debug-a-lot-of-information-useful-for-development-testing"><a href="#debug-a-lot-of-information-useful-for-development-testing" class="headerlink" title="debug (a lot of information, useful for development/testing)"></a>debug (a lot of information, useful for development/testing)</h1></li>
<li><h1 id="verbose-many-rarely-useful-info-but-not-a-mess-like-the-debug-level"><a href="#verbose-many-rarely-useful-info-but-not-a-mess-like-the-debug-level" class="headerlink" title="verbose (many rarely useful info, but not a mess like the debug level)"></a>verbose (many rarely useful info, but not a mess like the debug level)</h1></li>
<li><h1 id="notice-moderately-verbose-what-you-want-in-production-probably"><a href="#notice-moderately-verbose-what-you-want-in-production-probably" class="headerlink" title="notice (moderately verbose, what you want in production probably)"></a>notice (moderately verbose, what you want in production probably)</h1></li>
<li><h1 id="warning-only-very-important-critical-messages-are-logged"><a href="#warning-only-very-important-critical-messages-are-logged" class="headerlink" title="warning (only very important / critical messages are logged)"></a>warning (only very important / critical messages are logged)</h1></li>
<li>loglevel notice</li>
<li><h1 id="Specify-the-log-file-name-Also-the-empty-string-can-be-used-to-force"><a href="#Specify-the-log-file-name-Also-the-empty-string-can-be-used-to-force" class="headerlink" title="Specify the log file name. Also the empty string can be used to force"></a>Specify the log file name. Also the empty string can be used to force</h1></li>
<li><h1 id="Redis-to-log-on-the-standard-output-Note-that-if-you-use-standard"><a href="#Redis-to-log-on-the-standard-output-Note-that-if-you-use-standard" class="headerlink" title="Redis to log on the standard output. Note that if you use standard"></a>Redis to log on the standard output. Note that if you use standard</h1></li>
<li><h1 id="output-for-logging-but-daemonize-logs-will-be-sent-to-dev-null"><a href="#output-for-logging-but-daemonize-logs-will-be-sent-to-dev-null" class="headerlink" title="output for logging but daemonize, logs will be sent to /dev/null"></a>output for logging but daemonize, logs will be sent to /dev/null</h1></li>
<li>logfile /var/log/redis.log</li>
<li><h1 id="The-working-directory"><a href="#The-working-directory" class="headerlink" title="The working directory."></a>The working directory.</h1></li>
<li>#</li>
<li><h1 id="The-DB-will-be-written-inside-this-directory-with-the-filename-specified"><a href="#The-DB-will-be-written-inside-this-directory-with-the-filename-specified" class="headerlink" title="The DB will be written inside this directory, with the filename specified"></a>The DB will be written inside this directory, with the filename specified</h1></li>
<li><h1 id="above-using-the-‘dbfilename’-configuration-directive"><a href="#above-using-the-‘dbfilename’-configuration-directive" class="headerlink" title="above using the ‘dbfilename’ configuration directive."></a>above using the ‘dbfilename’ configuration directive.</h1></li>
<li>#</li>
<li><h1 id="The-Append-Only-File-will-also-be-created-inside-this-directory"><a href="#The-Append-Only-File-will-also-be-created-inside-this-directory" class="headerlink" title="The Append Only File will also be created inside this directory."></a>The Append Only File will also be created inside this directory.</h1></li>
<li>#</li>
<li><h1 id="Note-that-you-must-specify-a-directory-here-not-a-file-name"><a href="#Note-that-you-must-specify-a-directory-here-not-a-file-name" class="headerlink" title="Note that you must specify a directory here, not a file name."></a>Note that you must specify a directory here, not a file name.</h1></li>
<li><p>dir ./</p>
<p>添加启动脚本/etc/init.d/redis：</p>
</li>
<li><p>#!/bin/sh</p>
</li>
<li>#</li>
<li><h1 id="redis-Startup-script-for-Redis-Server"><a href="#redis-Startup-script-for-Redis-Server" class="headerlink" title="redis        Startup script for Redis Server"></a>redis        Startup script for Redis Server</h1></li>
<li>#</li>
<li><h1 id="chkconfig-90-10"><a href="#chkconfig-90-10" class="headerlink" title="chkconfig: - 90 10"></a>chkconfig: - 90 10</h1></li>
<li><h1 id="description-Redis-is-an-open-source-advanced-key-value-store"><a href="#description-Redis-is-an-open-source-advanced-key-value-store" class="headerlink" title="description: Redis is an open source, advanced key-value store."></a>description: Redis is an open source, advanced key-value store.</h1></li>
<li>#</li>
<li><h1 id="processname-redis-server"><a href="#processname-redis-server" class="headerlink" title="processname: redis-server"></a>processname: redis-server</h1></li>
<li><h1 id="config-etc-redis-conf"><a href="#config-etc-redis-conf" class="headerlink" title="config: /etc/redis.conf"></a>config: /etc/redis.conf</h1></li>
<li><h1 id="pidfile-var-run-redis-pid"><a href="#pidfile-var-run-redis-pid" class="headerlink" title="pidfile: /var/run/redis.pid"></a>pidfile: /var/run/redis.pid</h1></li>
<li><p>REDISPORT=6379</p>
</li>
<li><h1 id="下面的目录要看编译的目录，这两个文件会在编译目录的src目录下。"><a href="#下面的目录要看编译的目录，这两个文件会在编译目录的src目录下。" class="headerlink" title="下面的目录要看编译的目录，这两个文件会在编译目录的src目录下。"></a>下面的目录要看编译的目录，这两个文件会在编译目录的src目录下。</h1></li>
<li>EXEC=/usr/local/bin/redis-server</li>
<li><p>REDIS_CLI=/usr/local/bin/redis-cli</p>
</li>
<li><p>PIDFILE=/var/run/redis.pid</p>
</li>
<li><h1 id="下面的目录要看编译的目录，这个文件会在编译目录下。"><a href="#下面的目录要看编译的目录，这个文件会在编译目录下。" class="headerlink" title="下面的目录要看编译的目录，这个文件会在编译目录下。"></a>下面的目录要看编译的目录，这个文件会在编译目录下。</h1></li>
<li><p>CONF=”/usr/src/redis-2.8.13/redis.conf”</p>
</li>
<li><p>case “$1” in</p>
</li>
<li>start)</li>
<li>if [ -f $PIDFILE ]</li>
<li>then</li>
<li>echo “$PIDFILE exists, process is already running or crashed”</li>
<li>else</li>
<li>echo “Starting Redis server…”</li>
<li>$EXEC $CONF</li>
<li>fi</li>
<li>if [ “$?”=”0” ]</li>
<li>then</li>
<li>echo “Redis is running…”</li>
<li>fi</li>
<li>;;</li>
<li>stop)</li>
<li>if [ ! -f $PIDFILE ]</li>
<li>then</li>
<li>echo “$PIDFILE does not exist, process is not running”</li>
<li>else</li>
<li>PID=$(cat $PIDFILE)</li>
<li>echo “Stopping …”</li>
<li>$REDIS_CLI -p $REDISPORT SHUTDOWN</li>
<li>while [ -x ${PIDFILE} ]</li>
<li>do</li>
<li>echo “Waiting for Redis to shutdown …”</li>
<li>sleep 1</li>
<li>done</li>
<li>echo “Redis stopped”</li>
<li>fi</li>
<li>;;</li>
<li>restart|force-reload)</li>
<li>${0} stop</li>
<li>${0} start</li>
<li>;;</li>
<li>*)</li>
<li>echo “Usage: /etc/init.d/redis {start|stop|restart|force-reload}” &gt;&amp;2</li>
<li>exit 1</li>
<li><p>esac</p>
<p>添加redis为系统的服务：</p>
</li>
<li><p>[root@localhost redis]# ll /etc/init.d/redis</p>
</li>
<li>-rw-r–r–. 1 root root 1394 Nov 24 14:06 /etc/init.d/redis</li>
<li>[root@localhost redis]# chmod +x /etc/init.d/redis</li>
<li>[root@localhost redis]# ll /etc/init.d/redis</li>
<li>-rwxr-xr-x. 1 root root 1394 Nov 24 14:06 /etc/init.d/redis</li>
<li>[root@localhost redis]#</li>
<li>[root@localhost redis]# chkconfig –add redis</li>
<li>[root@localhost redis]# chkconfig redis on</li>
<li><p>[root@localhost redis]# chkconfig</p>
</li>
<li><p>Note: This output shows SysV services only and does not include native</p>
</li>
<li>systemd services. SysV configuration data might be overridden by native</li>
<li><p>systemd configuration.</p>
</li>
<li><p>If you want to list systemd services use ‘systemctl list-unit-files’.</p>
</li>
<li>To see services enabled on particular target use</li>
<li><p>‘systemctl list-dependencies [target]‘.</p>
</li>
<li><p>netconsole      0:off   1:off   2:off   3:off   4:off   5:off   6:off</p>
</li>
<li>network         0:off   1:off   2:on    3:on    4:on    5:on    6:off</li>
<li>redis           0:off   1:off   2:on    3:on    4:on    5:on    6:off</li>
<li>[root@localhost redis]#</li>
</ol>
<p>ok，现在就安装好了。启动redis使用<code>service redis start</code> 或者<code>/etc/init.d/redis start</code> ，停止redis的命令<code>service redis stop</code> 或者<code>/etc/init.d/redis stop。</code></p>

    </div>
    <p class="post-meta">
        <span class="post-cat">分类：
            <a class="cat-link" href="/categories/NOSQL/">NOSQL</a>
        </span>
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/redis/" title="redis">redis</a> / 
    
        <a href="/tags/CentOS7/" title="CentOS7">CentOS7</a>
    

        </span>
    </p>
</article>
<!-- 分享按钮 -->

  <div class="article-share clearfix text-center">
    <div class="share-area">
      <span class="share-txt">分享到：</span>
      <a href="javascript: window.open('http://service.weibo.com/share/share.php?url=' + encodeURIComponent(location.href) + '&title=' + document.title + '&language=zh_cn');" class="share-icon weibo"></a>
      <a href="javascript: alert('请复制链接到微信并发送');" class="share-icon wechat"></a>
      <a href="javascript: window.open('http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=' + encodeURIComponent(location.href) + '&title=' + document.title);" class="share-icon qqzone"></a>
      <a href="javascript: window.open('http://connect.qq.com/widget/shareqq/index.html?url=' + encodeURIComponent(location.href) + '&desc=Jelon个人博客&title=' + document.title + '&callback=' + encodeURIComponent(location.href));" class="share-icon qq"></a>
      <a href="javascript: window.open('http://shuo.douban.com/!service/share?href=' + encodeURIComponent(location.href) + '&name=' + document.title + '&text=' + document.title);" class="share-icon douban"></a>
    </div>
  </div>


<!-- 上一篇/下一篇 -->

<div class="article-nav clearfix">
    
    <span class="prev fl">
        上一篇<br>
        <a href="/2015/11/24/2019030500111/">
            
                MySQL 高可用架构在业务层面的分析研究
            
        </a>
    </span>
    

    
    <span class="next fr">
        下一篇<br>
        <a href="/2015/11/24/2019030500153/">
            
                redis数据类型
            
        </a>
    </span>
    
</div>

<!-- 文章评论 -->

  <script src="/js/comment.js"></script>
  <div id="comments" class="comment">
    <!--
    <div class="sign-bar">
      GitHub 已登录!
      <span class="sign-link">登出</span>
    </div>
    <section class="box">
      <div class="com-avatar"><img src="/img/jelon.jpg" alt="avatar"></div>
      <div class="com-text">
        <div class="main">
          <textarea class="text-area-edited show" placeholder="欢迎评论！"></textarea>
          <div class="text-area-preview"></div>
        </div>
        <div class="switch">
          <div class="switch-item on">编辑</div>
          <div class="switch-item">预览</div>
        </div>
        <div class="button">提交</div>
      </div>
    </section>
    <section class="tips">注：评论支持 markdown 语法！</section>
    <section class="list-wrap">
      <ul class="list">
        <li>
          <div class="user-avatar">
            <a href="/">
              <img src="/img/jelon.jpg" alt="user-avatar">
            </a>
          </div>
          <div class="user-comment">
            <div class="user-comment-header">
              <span class="post-name">张德龙</span>
              <span class="post-time">2017年12月12日</span>
              <span class="like liked">已赞</span>
              <span class="like-num">2</span>
            </div>
            <div class="user-comment-body">333333</div>
          </div>
        </li>
        <li>
          <div class="user-avatar">
            <a href="/">
              <img src="/img/jelon.jpg" alt="user-avatar">
            </a>
          </div>
          <div class="user-comment">
            <div class="user-comment-header">
              <span class="post-name">刘德华</span>
              <span class="post-time">2017年12月12日</span>
              <span class="like">点赞</span>
              <span class="like-num">2</span>
            </div>
            <div class="user-comment-body">vvvvv</div>
          </div>
        </li>
      </ul>
      <div class="page-nav">
        <a href="javascript: void(0);" class="item">1</a>
        <a href="javascript: void(0);" class="item">2</a>
        <a href="javascript: void(0);" class="item current">3</a>
      </div>
    </section>
    -->
  </div>
  <script>
  JELON.Comment({
    container: 'comments',
    label: '2019030500006' || '2015/11/24/2019030500006/',
    owner: 'your_github_id',
    repo: 'your_blog_comments',
    clientId: 'your_client_id',
    clientSecret: 'your_client_secret'
  });
  </script>


            </div>

        </section>
        <!-- 侧栏部分 -->
<aside class="sidebar">
    <section class="widget">
        <h3 class="widget-hd"><strong>文章分类</strong></h3>
        <!-- 文章分类 -->
<ul class="widget-bd">
    
    <li>
        <a href="/categories/MySQL/">MySQL</a>
        <span class="badge">(92)</span>
    </li>
    
    <li>
        <a href="/categories/Oracle/">Oracle</a>
        <span class="badge">(40)</span>
    </li>
    
    <li>
        <a href="/categories/NOSQL/">NOSQL</a>
        <span class="badge">(17)</span>
    </li>
    
    <li>
        <a href="/categories/开发语言/">开发语言</a>
        <span class="badge">(7)</span>
    </li>
    
    <li>
        <a href="/categories/SQL-Server/">SQL Server</a>
        <span class="badge">(13)</span>
    </li>
    
    <li>
        <a href="/categories/其他数据库/">其他数据库</a>
        <span class="badge">(4)</span>
    </li>
    
    <li>
        <a href="/categories/MySQL/Oracle/">Oracle</a>
        <span class="badge">(3)</span>
    </li>
    
    <li>
        <a href="/categories/MySQL/Oracle/SQL-Server/">SQL Server</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="/categories/NOSQL/开发语言/">开发语言</a>
        <span class="badge">(1)</span>
    </li>
    
</ul>
    </section>

    
    <section class="widget">
        <h3 class="widget-hd"><strong>热门标签</strong></h3>
        <!-- 文章标签 -->
<div class="widget-bd tag-wrap">
  
    <a class="tag-item" href="/tags/MySQL/" title="MySQL">MySQL (71)</a>
  
    <a class="tag-item" href="/tags/位运算/" title="位运算">位运算 (0)</a>
  
    <a class="tag-item" href="/tags/sqlplus/" title="sqlplus">sqlplus (1)</a>
  
    <a class="tag-item" href="/tags/PL-SQL/" title="PL/SQL">PL/SQL (5)</a>
  
    <a class="tag-item" href="/tags/数据库/" title="数据库">数据库 (7)</a>
  
    <a class="tag-item" href="/tags/视图/" title="视图">视图 (1)</a>
  
    <a class="tag-item" href="/tags/B-Tree/" title="B+Tree">B+Tree (1)</a>
  
    <a class="tag-item" href="/tags/索引/" title="索引">索引 (1)</a>
  
    <a class="tag-item" href="/tags/redis/" title="redis">redis (6)</a>
  
    <a class="tag-item" href="/tags/SSDB/" title="SSDB">SSDB (1)</a>
  
    <a class="tag-item" href="/tags/SQL/" title="SQL">SQL (17)</a>
  
    <a class="tag-item" href="/tags/ORA-00600/" title="ORA-00600">ORA-00600 (1)</a>
  
    <a class="tag-item" href="/tags/存储过程/" title="存储过程">存储过程 (3)</a>
  
    <a class="tag-item" href="/tags/CentOS/" title="CentOS">CentOS (2)</a>
  
    <a class="tag-item" href="/tags/allow/" title="allow">allow (1)</a>
  
    <a class="tag-item" href="/tags/Apache/" title="Apache">Apache (1)</a>
  
    <a class="tag-item" href="/tags/deny/" title="deny">deny (1)</a>
  
    <a class="tag-item" href="/tags/druid/" title="druid">druid (1)</a>
  
    <a class="tag-item" href="/tags/心跳/" title="心跳">心跳 (1)</a>
  
    <a class="tag-item" href="/tags/事务/" title="事务">事务 (5)</a>
  
    <a class="tag-item" href="/tags/分布式/" title="分布式">分布式 (1)</a>
  
    <a class="tag-item" href="/tags/消息/" title="消息">消息 (1)</a>
  
    <a class="tag-item" href="/tags/KeepAlived/" title="KeepAlived">KeepAlived (1)</a>
  
    <a class="tag-item" href="/tags/Oracle/" title="Oracle">Oracle (30)</a>
  
    <a class="tag-item" href="/tags/schedule-job/" title="schedule job">schedule job (1)</a>
  
    <a class="tag-item" href="/tags/分库/" title="分库">分库 (1)</a>
  
    <a class="tag-item" href="/tags/分库分表/" title="分库分表">分库分表 (1)</a>
  
    <a class="tag-item" href="/tags/分表/" title="分表">分表 (1)</a>
  
    <a class="tag-item" href="/tags/结构同步/" title="结构同步">结构同步 (1)</a>
  
    <a class="tag-item" href="/tags/批量/" title="批量">批量 (1)</a>
  
    <a class="tag-item" href="/tags/truncate/" title="truncate">truncate (1)</a>
  
    <a class="tag-item" href="/tags/Hash索引/" title="Hash索引">Hash索引 (1)</a>
  
    <a class="tag-item" href="/tags/InnoDB/" title="InnoDB">InnoDB (3)</a>
  
    <a class="tag-item" href="/tags/MyISAM/" title="MyISAM">MyISAM (3)</a>
  
    <a class="tag-item" href="/tags/索引优化/" title="索引优化">索引优化 (1)</a>
  
    <a class="tag-item" href="/tags/FineReport/" title="FineReport">FineReport (1)</a>
  
    <a class="tag-item" href="/tags/报表/" title="报表">报表 (1)</a>
  
    <a class="tag-item" href="/tags/数据集/" title="数据集">数据集 (1)</a>
  
    <a class="tag-item" href="/tags/Excel/" title="Excel">Excel (1)</a>
  
</div>
    </section>
    

    

    
    <!-- 友情链接 -->
    <section class="widget">
        <h3 class="widget-hd"><strong>友情链接</strong></h3>
        <!-- 文章分类 -->
<ul class="widget-bd">
    
        <li>
            <a href="https://jelon.top" target="_blank" title="Jelon个人前端小站">前端博客小站</a>
        </li>
    
        <li>
            <a href="https://www.baidu.com" target="_blank" title="百度搜索">百度</a>
        </li>
    
</ul>
    </section>
    
</aside>
<!-- / 侧栏部分 -->
    </div>

    <!-- 博客底部 -->
    <footer class="footer">
    &copy;
    
        2016-2019
    

    <a href="/">Jelon Loves You</a>
</footer>
<div class="back-to-top" id="JELON__backToTop" title="返回顶部">返回顶部</div>

    <!--博客js脚本 -->
    <!-- 这里放网站js脚本 -->
<script src="/js/main.js"></script>
</body>
</html>