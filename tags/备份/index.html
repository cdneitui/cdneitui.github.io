<!doctype html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=11,IE=10,IE=9,IE=8">
    <meta name="baidu-site-verification" content="dIcXMeY8Ya">
    
    <title>`备份`标签下的文章 | 软件开发吧</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <meta name="keywords" content="Jelon, 前端, Web, 张德龙, 前端开发">
    <meta name="description" content="Jelon个人前端小站">

    
    <link rel="alternative" href="/atom.xml" title="软件开发吧" type="application/atom+xml">
    
    
    <link rel="shortcut icon" href="/favicon.ico">
    
    <link rel="stylesheet" href="/css/style.css">
    <!--[if lt IE 9]>
    <script src="/js/html5.js"></script>
    <![endif]-->
    
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?fd459238242776d173cdc64918fb32f2";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>


</head>
</html>
<body class="home">
    <!--[if lt IE 9]>
    <div class="browsehappy">
        当前网页 <strong>不支持</strong>
        你正在使用的浏览器. 为了正常的访问, 请 <a href="http://browsehappy.com/">升级你的浏览器</a>.
    </div>
    <![endif]-->

    <!-- 博客头部 -->
    <header class="header">
    <section class="container header-main">
        <div class="logo">
            <a href="/">
                <div class="cover">
                    <span class="name">软件开发吧</span>
                    <span class="description"></span>
                </div>
            </a>
        </div>
        <div class="dropnav icon-paragraph-justify" id="JELON__btnDropNav"></div>
        <ul class="menu hidden" id="JELON__menu">
            
            <li rel="/tags/备份/index.html" class="item ">
                <a href="/" title="首页" class="icon-home">&nbsp;首页</a>
            </li>
            
            <li rel="/tags/备份/index.html" class="item ">
                <a href="/lab/" title="实验室" class="icon-lab">&nbsp;实验室</a>
            </li>
            
            <li rel="/tags/备份/index.html" class="item ">
                <a href="/about/" title="关于" class="icon-about">&nbsp;关于</a>
            </li>
            
            <li rel="/tags/备份/index.html" class="item ">
                <a href="/comment/" title="留言" class="icon-comment">&nbsp;留言</a>
            </li>
            
        </ul>
        <div class="profile clearfix">
            <div class="feeds fl">
                
                
                <p class="links">
                    
                        <a href="https://github.com/jangdelong" target="_blank">Github</a>
                        |
                    
                        <a href="https://pages.coding.me" target="_blank">Hosted by Coding Pages</a>
                        
                    
                </p>
                <p class="sns">
                    
                        <a href="http://weibo.com/jangdelong" class="sinaweibo" target="_blank"><b>■</b> 新浪微博</a>
                    
                        <a href="https://www.facebook.com/profile.php?id=100011855760219&amp;ref=bookmarks" class="qqweibo" target="_blank"><b>■</b> Facebook</a>
                    
                    <a href="javascript: void(0);" class="wechat">
                        <b>■</b>
                        公众号
                        <span class="popover">
                            <img src="/img/wechat_mp.jpg" width="120" height="120" alt="我的微信订阅号">
                            <i class="arrow"></i>
                        </span>
                    </a>
                </p>
                
            </div>
            <div class="avatar fr">
                <img src="/img/jelon.jpg" alt="avatar" title="Jelon">
            </div>
        </div>
    </section>
</header>


    <!-- 博客正文 -->
    <div class="container body clearfix">
        <section class="content">
            <div class="content-main widget">
                <!-- 按标签分类 -->

    <h3 class="widget-hd">
        <strong>
            
                `备份`标签下的文章
            
        </strong>
    </h3>
    
        <!-- 文章列表 item -->
<article class="post">
    <header>
        <!-- 标签这有且只能显示一个 -->
        
        <a class="cat-link" href="/categories/MySQL/">MySQL</a>
        
        <!-- 文章标题 -->
        
    <h3 class="post-title">
    	<a href="/2016/05/04/2019030500114/">
    		mysql qpress压缩备份恢复
    	</a>
    </h3>

    </header>
    <p class="post-meta">
        Jelon 发表于
        <time datetime="2016-05-04T01:58:29.000Z">2016-05-04</time>
        &nbsp;&nbsp;
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/gzip/" title="gzip">gzip</a> / 
    
        <a href="/tags/qpress/" title="qpress">qpress</a> / 
    
        <a href="/tags/备份/" title="备份">备份</a> / 
    
        <a href="/tags/备份恢复/" title="备份恢复">备份恢复</a> / 
    
        <a href="/tags/恢复/" title="恢复">恢复</a>
    

        </span>
    </p>

    <div class="post-content">
        <div class="post-excerpt">
            
                <p>1.估计大家都会gzip压缩方法，备份正常，但后来恢复的时候，发现命中bug，报错如下： InnoDB: Page [page id: space=9494, page number=27743946] log sequence number 2332453520996 is in the future! Current system log sequence number 2332453312855. InnoDB: Your database may be corrupt or you may have copied the InnoDB tablespace but not the InnoDB log files. Please refer to <a href="http://dev.mysql.com/doc/refman/5.7/en/forcing-innodb-recovery.html" target="_blank" rel="noopener">http://dev.mysql.com/doc/refman/5.7/en/forcing-innodb-recovery.html</a> for information about forcing recovery. InnoDB: Page [page id: space=9494, page number=27735123] log sequence number 2332456427612 is in the future! Current system log sequence number 2332453312855. InnoDB: Your database may be corrupt or you may have copied the InnoDB tablespace but not the InnoDB log files. Please refer to <a href="http://dev.mysql.com/doc/refman/5.7/en/forcing-innodb-recovery.html" target="_blank" rel="noopener">http://dev.mysql.com/doc/refman/5.7/en/forcing-innodb-recovery.html</a> for information about forcing recovery. InnoDB: Apply batch completed InnoDB: xtrabackup: Last MySQL binlog file position 513900963, file name mysql-bin.000436 InnoDB: Creating shared tablespace for temporary tables InnoDB: Starting in background the rollback of uncommitted transactions InnoDB: Rolling back trx with id 661140886, 1 rows to undo InnoDB: Setting file ‘./ibtmp1’ size to 12 MB. Physically writing the file full; Please wait … InnoDB: Rollback of trx with id 661140886 completed InnoDB: Rolling back trx with id 661140885, 1 rows to undo InnoDB: Rollback of trx with id 661140885 completed InnoDB: Rolling back trx with id 661140884, 1 rows to undo InnoDB: Rollback of trx with id 661140884 completed InnoDB: Rollback of non-prepared transactions completed InnoDB: File ‘./ibtmp1’ size is now 12 MB. InnoDB: 96 redo rollback segment(s) found. 1 redo rollback segment(s) are active. InnoDB: 32 non-redo rollback segment(s) are active. InnoDB: 5.7.10 started; log sequence number 2332453312097 InnoDB: page_cleaner: 1000ms intended loop took 341221ms. The settings might not be optimal. (flushed=0 and evicted=0, during the time.) InnoDB: not started InnoDB: xtrabackup: Last MySQL binlog file position 513900963, file name mysql-bin.000436 xtrabackup: error: The transaction log file is corrupted. xtrabackup: error: The log was not applied to the intended LSN! 2.本文采用了qpress的压缩方式，并发备份，速度比原来要快5倍，压缩比率比gzip稍微低一些，gzip约为117/775,qpress 约为157/775 一、备份机制 一周全备份一次 每天做一次增备（全备份当天除外） 二、备份 2.1全备： innobackupex –defaults-file=/etc/my.cnf –use-memory=10G –user=root –password=root –compress –compress-threads=8 –parallel=4 –stream=xbstream /mysql/full –extra-lsndir=/tmp  &gt; /mysql/full/backup.xbstream 若需要传到其他主机，可使用下述命令： innobackupex –defaults-file=/etc/my.cnf –use-memory=10G –user=root –password=root –compress –compress-threads=8 –parallel=4 –stream=xbstream /mysql/full –extra-lsndir=/tmp |ssh  <a href="mailto:root@180.153.62.136" target="_blank" rel="noopener">root@180.153.62.136</a>“ xbstream -x -C /mysql/full” 2.2增量备份：–必须是在全备的基础上进行 innobackupex –defaults-file=/etc/my.cnf –use-memory=10G –user=root –password=root –compress –compress-threads=8 –parallel=4 –stream=xbstream  –incremental –incremental-basedir=/tmp –extra-lsndir=/tmp  /mysql/incre1&gt; /mysql/incre1/backup_incre1.xbstream 三、备份恢复举例 当前环境： mysql&gt; use testdb Reading table information for completion of table and column names You can turn off this feature to get a quicker startup with -A Database changed mysql&gt; show tables; +———————+ | Tables_in_testdb    | +———————+ | fq_1                | | milestat            | | miletest            | | runningrecord       | | runningrecordlatest | | t1                  | | t2                  | | t3                  | | t4                  | | t_timetest          | | testrun             | | testrun2            | | v_1                 | +———————+ 13 rows in set (0.01 sec) mysql&gt; select <em> from t1; +——+ | id   | +——+ |    1 | |    2 | |    3 | |    4 | +——+ 4 rows in set (0.04 sec) 1）全备：–并发数可自定义 innobackupex –defaults-file=/etc/my.cnf –use-memory=500m –user=root –password=root –compress –compress-threads=2 –parallel=2 –stream=xbstream /mysql/full –extra-lsndir=/tmp  &gt; /mysql/full/backup.xbstream [root@kafka1 full]# ll 总用量 9492 -rw-r–r–. 1 root root 9716168 5月   3 11:55 backup.xbstream [root@kafka1 full]# cat /tmp/xtrabackup_checkpoints   –记录位置点的文件 backup_type = full-backuped from_lsn = 0                      –开始点 to_lsn = 50779787                 –结束点 last_lsn = 50779796 compact = 0 recover_binlog_info = 0 [root@kafka1 full]# 说明：因为全备要拷贝走，因此需要额外的一份lsn保留下来，以便下次读取位置做增备 2）做一些操作： mysql&gt; insert into t1 values (5),(6),(7),(8); Query OK, 4 rows affected (0.33 sec) Records: 4  Duplicates: 0  Warnings: 0 mysql&gt; select </em> from t1; +——+ | id   | +——+ |    1 | |    2 | |    3 | |    4 | |    5 | |    6 | |    7 | |    8 | +——+ 8 rows in set (0.00 sec) mysql&gt; drop table t4; Query OK, 0 rows affected (0.10 sec) 3）第一次增量备份 innobackupex –defaults-file=/etc/my.cnf –use-memory=400m –user=root –password=root –compress –compress-threads=2 –parallel=2 –stream=xbstream  –incremental –incremental-basedir=/tmp –extra-lsndir=/tmp  /mysql/incre1&gt; /mysql/incre1/backup_incre1.xbstream 说明： –incremental-basedir 指向的是上一次备份的lsn所在目录； –extra-lsndir 指向的是这一次备份的额外xtrabackup_checkpoints的存放目录； /mysql/incre1 指向的是这次备份的存放目录。 [root@kafka1 incre1]# ll 总用量 488 -rw-r–r–. 1 root root 496194 5月   3 12:03 backup_incre1.xbstream [root@kafka1 tmp]# cat xtrabackup_checkpoints    –名字跟之前一个相同，内容覆盖了 backup_type = incremental from_lsn = 50779787           –开始点（上一次的结束点） to_lsn = 50804287             –结束点 last_lsn = 50804296 compact = 0 recover_binlog_info = 0 4）再做一些操作 mysql&gt; truncate table t1; Query OK, 0 rows affected (0.14 sec) 5）第二次增量备份 innobackupex –defaults-file=/etc/my.cnf –use-memory=400m –user=root –password=root –compress –compress-threads=2 –parallel=2 –stream=xbstream  –incremental –incremental-basedir=/tmp –extra-lsndir=/tmp  /mysql/incre2&gt; /mysql/incre2/backup_incre2.xbstream [root@kafka1 mysql]# cd incre2 [root@kafka1 incre2]# ll 总用量 456 -rw-r–r–. 1 root root 465003 5月   3 13:38 backup_incre2.xbstream [root@kafka1 incre2]# cat /tmp/xtrabackup_checkpoints backup_type = incremental from_lsn = 50804287              –开始点 to_lsn = 50811553                –结束点 last_lsn = 50811562 compact = 0 recover_binlog_info = 0 [root@kafka1 incre2]# cd /mysql [root@kafka1 mysql]# du -sh <em> 9.3M full 488K incre1 456K incre2 [root@kafka1 mysql]# ll 总用量 0 drwxrwxrwx. 2 root root 28 5月   3 11:55 full drwxrwxrwx. 2 root root 35 5月   3 12:02 incre1 drwxrwxrwx. 2 root root 35 5月   3 13:38 incre2 6）模拟灾难 磁盘故障，整个数据丢失，在新机器上装好mysql后（目录相同，进行初始化） [root@kafka1 incre1]# service mysql57 stop Shutting down MySQL… SUCCESS! [root@kafka1 incre1]# cd /usr/local/mysql [root@kafka1 mysql]# ll 总用量 304 drwxr-xr-x.  2 mysql mysql   4096 11月 30 03:54 bin -rw-r–r–.  1 mysql mysql  17987 11月 30 03:16 COPYING drwxr-xr-x.  7 mysql mysql   4096 5月   3 13:43 data drwxr-xr-x.  6 mysql mysql   4096 4月  11 14:26 data_old drwxr-xr-x.  2 mysql mysql     52 11月 30 03:54 docs drwxr-xr-x.  3 mysql mysql   4096 11月 30 03:54 include -rw-r–r–.  1 mysql mysql 108090 11月 30 03:26 INSTALL-BINARY drwxr-xr-x.  5 mysql mysql   4096 11月 30 03:54 lib drwxr-xr-x.  4 mysql mysql     28 11月 30 03:54 man -rw-r—–.  1 mysql mysql 141349 5月   3 13:43 mysqlerr.log -rw-r–r–.  1 mysql mysql   2478 11月 30 03:16 README drwxr-xr-x. 28 mysql mysql   4096 11月 30 03:54 share drwxr-xr-x.  2 mysql mysql   4096 11月 30 03:54 support-files [root@kafka1 mysql]# mv data data_bak     —整个data目录移走 [root@kafka1 mysql]# mkdir data [root@kafka1 mysql]# chown mysql:mysql data  –新建一个空的，准备恢复 7）解压全备包 [root@kafka1 full]# xbstream -x &lt;backup.xbstream  -C /tmp/test [root@kafka1 full]# cd /tmp/test [root@kafka1 test]# ll 总用量 3568 -rw-r—–. 1 root root     407 5月   3 14:58 backup-my.cnf.qp -rw-r—–. 1 root root     308 5月   3 14:58 ib_buffer_pool.qp -rw-r—–. 1 root root 3594072 5月   3 14:58 ibdata1.qp drwxr-x—. 2 root root    4096 5月   3 14:58 mysql drwxr-x—. 2 root root    8192 5月   3 14:58 performance_schema drwxr-x—. 2 root root    4096 5月   3 14:58 sakila drwxr-x—. 2 root root    8192 5月   3 14:58 sys drwxr-x—. 2 root root    4096 5月   3 14:58 testdb -rw-r—–. 1 root root     115 5月   3 14:58 xtrabackup_checkpoints -rw-r—–. 1 root root     540 5月   3 14:58 xtrabackup_info.qp -rw-r—–. 1 root root     369 5月   3 14:58 xtrabackup_logfile.qp 8）解压增量包 [root@kafka1 incre1]# xbstream -x &lt;backup_incre1.xbstream [root@kafka1 incre1]# ll total 640 -rw-r–r–. 1 root root 496194 May  3 12:03 backup_incre1.xbstream -rw-r—–. 1 root root    407 May  3 15:02 backup-my.cnf.qp -rw-r—–. 1 root root    308 May  3 15:02 ib_buffer_pool.qp -rw-r—–. 1 root root  79915 May  3 15:02 ibdata1.delta.qp -rw-r—–. 1 root root     44 May  3 15:02 ibdata1.meta drwxr-x—. 2 root root   4096 May  3 15:02 mysql drwxr-x—. 2 root root   8192 May  3 15:02 performance_schema drwxr-x—. 2 root root   4096 May  3 15:02 sakila drwxr-x—. 2 root root   8192 May  3 15:02 sys drwxr-x—. 2 root root   4096 May  3 15:02 testdb -rw-r—–. 1 root root    120 May  3 15:02 xtrabackup_checkpoints -rw-r—–. 1 root root    565 May  3 15:02 xtrabackup_info.qp -rw-r—–. 1 root root    329 May  3 15:02 xtrabackup_logfile.qp [root@kafka1 incre2]# xbstream -x &lt;backup_incre2.xbstream [root@kafka1 incre2]# ll total 584 -rw-r–r–. 1 root root 465003 May  3 13:38 backup_incre2.xbstream -rw-r—–. 1 root root    407 May  3 15:02 backup-my.cnf.qp -rw-r—–. 1 root root    308 May  3 15:02 ib_buffer_pool.qp -rw-r—–. 1 root root  56172 May  3 15:02 ibdata1.delta.qp -rw-r—–. 1 root root     44 May  3 15:02 ibdata1.meta drwxr-x—. 2 root root   4096 May  3 15:02 mysql drwxr-x—. 2 root root   8192 May  3 15:02 performance_schema drwxr-x—. 2 root root   4096 May  3 15:02 sakila drwxr-x—. 2 root root   8192 May  3 15:02 sys drwxr-x—. 2 root root   4096 May  3 15:02 testdb -rw-r—–. 1 root root    120 May  3 15:02 xtrabackup_checkpoints -rw-r—–. 1 root root    567 May  3 15:02 xtrabackup_info.qp -rw-r—–. 1 root root    400 May  3 15:02 xtrabackup_logfile.qp 9）解压所有qp文件 9.1 安装 tar –xvf qpress-11-linux-x64.tar cp qpress /usr/bin chmod 777 qpress 9.2解压全备 [root@kafka1 test]# for f in `find ./ -iname “</em>\.qp”`; do qpress -dT2 $f  $(dirname $f) &amp;&amp; rm -f $f; done [root@kafka1 test]# ll 总用量 77880 -rw-r–r–. 1 root root      412 5月   3 15:14 backup-my.cnf -rw-r–r–. 1 root root      300 5月   3 15:14 ib_buffer_pool -rw-r–r–. 1 root root 79691776 5月   3 15:14 ibdata1 drwxr-x—. 2 root root     4096 5月   3 15:14 mysql drwxr-x—. 2 root root     8192 5月   3 15:14 performance_schema drwxr-x—. 2 root root     4096 5月   3 15:14 sakila drwxr-x—. 2 root root     8192 5月   3 15:14 sys drwxr-x—. 2 root root     4096 5月   3 15:14 testdb -rw-r—–. 1 root root      115 5月   3 14:58 xtrabackup_checkpoints -rw-r–r–. 1 root root      563 5月   3 15:14 xtrabackup_info -rw-r–r–. 1 root root     2560 5月   3 15:14 xtrabackup_logfile 9.3解压增备1 [root@kafka1 incre1]# for f in `find ./ -iname “<em>\.qp”`; do qpress -dT2 $f  $(dirname $f) &amp;&amp; rm -f $f; done [root@kafka1 incre1]# ll 总用量 1220 -rw-r–r–. 1 root root 496194 5月   3 12:03 backup_incre1.xbstream -rw-r–r–. 1 root root    412 5月   3 15:26 backup-my.cnf -rw-r–r–. 1 root root    300 5月   3 15:26 ib_buffer_pool -rw-r–r–. 1 root root 671744 5月   3 15:26 ibdata1.delta -rw-r—–. 1 root root     44 5月   3 15:02 ibdata1.meta drwxr-x—. 2 root root   4096 5月   3 15:26 mysql drwxr-x—. 2 root root   8192 5月   3 15:26 performance_schema drwxr-x—. 2 root root   8192 5月   3 15:26 sakila drwxr-x—. 2 root root   8192 5月   3 15:26 sys drwxr-x—. 2 root root   4096 5月   3 15:26 testdb -rw-r—–. 1 root root    120 5月   3 15:02 xtrabackup_checkpoints -rw-r–r–. 1 root root    612 5月   3 15:26 xtrabackup_info -rw-r–r–. 1 root root   2560 5月   3 15:26 xtrabackup_logfile 9.4解压增备2 [root@kafka1 incre2]# for f in `find ./ -iname “</em>\.qp”`; do qpress -dT2 $f  $(dirname $f) &amp;&amp; rm -f $f; done [root@kafka1 incre2]# ll 总用量 1072 -rw-r–r–. 1 root root 465003 5月   3 13:38 backup_incre2.xbstream -rw-r–r–. 1 root root    412 5月   3 15:10 backup-my.cnf -rw-r–r–. 1 root root    300 5月   3 15:10 ib_buffer_pool -rw-r–r–. 1 root root 557056 5月   3 15:10 ibdata1.delta -rw-r—–. 1 root root     44 5月   3 15:02 ibdata1.meta drwxr-x—. 2 root root   4096 5月   3 15:10 mysql drwxr-x—. 2 root root   8192 5月   3 15:10 performance_schema drwxr-x—. 2 root root   4096 5月   3 15:10 sakila drwxr-x—. 2 root root   8192 5月   3 15:10 sys drwxr-x—. 2 root root   4096 5月   3 15:10 testdb -rw-r—–. 1 root root    120 5月   3 15:02 xtrabackup_checkpoints -rw-r–r–. 1 root root    613 5月   3 15:10 xtrabackup_info -rw-r–r–. 1 root root   2560 5月   3 15:10 xtrabackup_logfile 10）应用所有日志 10.1 应用全备日志 innobackupex –use-memory=400m –apply-log  –redo-only /tmp/test xtrabackup: starting shutdown with innodb_fast_shutdown = 1 InnoDB: Starting shutdown… InnoDB: Shutdown completed; log sequence number 50779805 InnoDB: Number of pools: 1 160503 15:23:35 completed OK! 10.2 应用增备日志1 innobackupex   –use-memory=400m –apply-log –redo-only  /tmp/test –incremental-dir=/mysql/incre1 ……………… 160503 15:27:41 [01] Copying /mysql/incre1/performance_schema/db.opt to ./performance_schema/db.opt 160503 15:27:41 [01]        …done 160503 15:27:41 [01] Copying /mysql/incre1/performance_schema/cond_instances.frm to ./performance_schema/cond_instances.frm 160503 15:27:41 [01]        …done 160503 15:27:41 [00] Copying /mysql/incre1/xtrabackup_info to ./xtrabackup_info 160503 15:27:41 [00]        …done 160503 15:27:41 completed OK! 10.3 应用增备日志2 innobackupex   –use-memory=400m –apply-log  /tmp/test –incremental-dir=/mysql/incre2 说明：其实就是将增备1和增备2中的所有操作日志应用到全备目录，那么此时的全备目录就是增备2的最新数据，直接使用这个全备目录还原即可。 最后一次的增备不带redo-only参数 11)将数据目录拷贝回data 11.1 可使用copy-back innobackupex –defaults-file=/etc/my.cnf  –user=’root’ –password=’root’ –copy-back  /tmp/test 11.2 也可直接修改名称，mv过去 [root@kafka1 mysql]# cd  /tmp/test [root@kafka1 test]# cp -r <em> ../data/ [root@kafka1 mysql]# chown -R mysql:mysql data 12）启动mysql [root@kafka1 mysql]# service mysql57 start Starting MySQL… SUCCESS! [root@kafka1 mysql]# /usr/local/mysql/bin/mysql -uroot -p Enter password: Welcome to the MySQL monitor.  Commands end with ; or \g. Your MySQL connection id is 2 Server version: 5.7.10 MySQL Community Server (GPL) Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved. Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners. Type ‘help;’ or ‘\h’ for help. Type ‘\c’ to clear the current input statement. mysql&gt; show databases; +——————–+ | Database           | +——————–+ | information_schema | | mysql              | | performance_schema | | sakila             | | sys                | | testdb             | +——————–+ 6 rows in set (0.08 sec) mysql&gt; use testdb Reading table information for completion of table and column names You can turn off this feature to get a quicker startup with -A Database changed mysql&gt; show tables; +———————+ | Tables_in_testdb    | +———————+ | fq_1                | | milestat            | | miletest            | | runningrecord       | | runningrecordlatest | | t1                  | | t2                  | | t3                  | | t_timetest          | | testrun             | | testrun2            | | v_1                 | +———————+ 12 rows in set (0.00 sec) mysql&gt; select </em> from t1; Empty set (0.00 sec) 验证可发现，所有备份的操作都在，恢复成功！ 13）利用binlog恢复到当天最新数据（由于我测试环境没开binlog，因此后续没测试） –获取最后一次增量的log position cd /mysql/incre2 more xtrabackup_binlog_info mysql-binlog.000453     774 –使用start-position 和stop-datetime  将日志追加到最新 mysqlbinlog /mysql/mysql-binlog/mysql-binlog.000453 –start-position=774 –stop-datetime=”2016-05-03 10:00:00” \ &gt; |mysql -uroot -proot –P2021</p>

            
            <p class="more">
                <a href="/2016/05/04/2019030500114/">阅读剩下更多</a>
            </p>
        </div>
        <div class="post-thumbnail" data-img>
            <a href="/2016/05/04/2019030500114/" title="mysql qpress压缩备份恢复">
                
                    <img class="thumbnail" src="/img/default.png" data-echo="/img/thumbnail/4.jpg" alt="默认配图">
                
            </a>
        </div>
    </div>
</article>

    

    
    <nav class="page-navigator">
        <span class="page-number current">1</span>
    </nav>
    


            </div>

        </section>
        <!-- 侧栏部分 -->
<aside class="sidebar">
    <section class="widget">
        <h3 class="widget-hd"><strong>文章分类</strong></h3>
        <!-- 文章分类 -->
<ul class="widget-bd">
    
    <li>
        <a href="/categories/MySQL/">MySQL</a>
        <span class="badge">(92)</span>
    </li>
    
    <li>
        <a href="/categories/开发语言/">开发语言</a>
        <span class="badge">(7)</span>
    </li>
    
    <li>
        <a href="/categories/Oracle/">Oracle</a>
        <span class="badge">(40)</span>
    </li>
    
    <li>
        <a href="/categories/NOSQL/">NOSQL</a>
        <span class="badge">(17)</span>
    </li>
    
    <li>
        <a href="/categories/其他数据库/">其他数据库</a>
        <span class="badge">(4)</span>
    </li>
    
    <li>
        <a href="/categories/SQL-Server/">SQL Server</a>
        <span class="badge">(13)</span>
    </li>
    
    <li>
        <a href="/categories/MySQL/Oracle/">Oracle</a>
        <span class="badge">(3)</span>
    </li>
    
    <li>
        <a href="/categories/MySQL/Oracle/SQL-Server/">SQL Server</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="/categories/NOSQL/开发语言/">开发语言</a>
        <span class="badge">(1)</span>
    </li>
    
</ul>
    </section>

    
    <section class="widget">
        <h3 class="widget-hd"><strong>热门标签</strong></h3>
        <!-- 文章标签 -->
<div class="widget-bd tag-wrap">
  
    <a class="tag-item" href="/tags/MySQL/" title="MySQL">MySQL (71)</a>
  
    <a class="tag-item" href="/tags/位运算/" title="位运算">位运算 (0)</a>
  
    <a class="tag-item" href="/tags/allow/" title="allow">allow (1)</a>
  
    <a class="tag-item" href="/tags/Apache/" title="Apache">Apache (1)</a>
  
    <a class="tag-item" href="/tags/deny/" title="deny">deny (1)</a>
  
    <a class="tag-item" href="/tags/sqlplus/" title="sqlplus">sqlplus (1)</a>
  
    <a class="tag-item" href="/tags/CentOS/" title="CentOS">CentOS (2)</a>
  
    <a class="tag-item" href="/tags/druid/" title="druid">druid (1)</a>
  
    <a class="tag-item" href="/tags/心跳/" title="心跳">心跳 (1)</a>
  
    <a class="tag-item" href="/tags/redis/" title="redis">redis (6)</a>
  
    <a class="tag-item" href="/tags/事务/" title="事务">事务 (5)</a>
  
    <a class="tag-item" href="/tags/分布式/" title="分布式">分布式 (1)</a>
  
    <a class="tag-item" href="/tags/消息/" title="消息">消息 (1)</a>
  
    <a class="tag-item" href="/tags/Oracle/" title="Oracle">Oracle (30)</a>
  
    <a class="tag-item" href="/tags/schedule-job/" title="schedule job">schedule job (1)</a>
  
    <a class="tag-item" href="/tags/KeepAlived/" title="KeepAlived">KeepAlived (1)</a>
  
    <a class="tag-item" href="/tags/分库/" title="分库">分库 (1)</a>
  
    <a class="tag-item" href="/tags/分库分表/" title="分库分表">分库分表 (1)</a>
  
    <a class="tag-item" href="/tags/分表/" title="分表">分表 (1)</a>
  
    <a class="tag-item" href="/tags/数据库/" title="数据库">数据库 (7)</a>
  
    <a class="tag-item" href="/tags/结构同步/" title="结构同步">结构同步 (1)</a>
  
    <a class="tag-item" href="/tags/truncate/" title="truncate">truncate (1)</a>
  
    <a class="tag-item" href="/tags/SQL/" title="SQL">SQL (17)</a>
  
    <a class="tag-item" href="/tags/批量/" title="批量">批量 (1)</a>
  
    <a class="tag-item" href="/tags/Excel/" title="Excel">Excel (1)</a>
  
    <a class="tag-item" href="/tags/Sqlite/" title="Sqlite">Sqlite (1)</a>
  
    <a class="tag-item" href="/tags/Hash索引/" title="Hash索引">Hash索引 (1)</a>
  
    <a class="tag-item" href="/tags/InnoDB/" title="InnoDB">InnoDB (3)</a>
  
    <a class="tag-item" href="/tags/MyISAM/" title="MyISAM">MyISAM (3)</a>
  
    <a class="tag-item" href="/tags/索引优化/" title="索引优化">索引优化 (1)</a>
  
    <a class="tag-item" href="/tags/FineReport/" title="FineReport">FineReport (1)</a>
  
    <a class="tag-item" href="/tags/报表/" title="报表">报表 (1)</a>
  
    <a class="tag-item" href="/tags/数据集/" title="数据集">数据集 (1)</a>
  
    <a class="tag-item" href="/tags/Linux/" title="Linux">Linux (2)</a>
  
    <a class="tag-item" href="/tags/Character-set/" title="Character set">Character set (1)</a>
  
    <a class="tag-item" href="/tags/NLS-LANG/" title="NLS_LANG">NLS_LANG (1)</a>
  
    <a class="tag-item" href="/tags/rowid/" title="rowid">rowid (2)</a>
  
    <a class="tag-item" href="/tags/重复/" title="重复">重复 (1)</a>
  
    <a class="tag-item" href="/tags/mysqldump/" title="mysqldump">mysqldump (2)</a>
  
</div>
    </section>
    

    

    
    <!-- 友情链接 -->
    <section class="widget">
        <h3 class="widget-hd"><strong>友情链接</strong></h3>
        <!-- 文章分类 -->
<ul class="widget-bd">
    
        <li>
            <a href="https://jelon.top" target="_blank" title="Jelon个人前端小站">前端博客小站</a>
        </li>
    
        <li>
            <a href="https://www.baidu.com" target="_blank" title="百度搜索">百度</a>
        </li>
    
</ul>
    </section>
    
</aside>
<!-- / 侧栏部分 -->
    </div>

    <!-- 博客底部 -->
    <footer class="footer">
    &copy;
    
        2016-2019
    

    <a href="/">Jelon Loves You</a>
</footer>
<div class="back-to-top" id="JELON__backToTop" title="返回顶部">返回顶部</div>

    <!--博客js脚本 -->
    <!-- 这里放网站js脚本 -->
<script src="/js/main.js"></script>
</body>
</html>