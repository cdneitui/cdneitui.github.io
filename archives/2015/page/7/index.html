<!doctype html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=11,IE=10,IE=9,IE=8">
    <meta name="baidu-site-verification" content="dIcXMeY8Ya">
    
    <title>文章归档: 2015 | 软件开发吧</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <meta name="keywords" content="SQL云,SQL云开发,SQL笔记,SQL开发,云开发,MySQL,Oralce,数据库,数据库云,数据库开发,数据库云开发,SQL教程,数据库教程,开发笔记,MySQL笔记,MySQL教程">
    <meta name="description" content="为满足广大程序猿兄弟对日常工作中学习数据库、使用使用数据库资料查询需求，SQL云开发免费将自己整理的各种数据库技术资料分享出来，并希望与广大猿兄一起讨论学习与进步,致力于一起更方便、快捷资料学习查询,实现更安全、高效的数据存储.">

    
    <link rel="alternative" href="/atom.xml" title="软件开发吧" type="application/atom+xml">
    
    
    <link rel="shortcut icon" href="/favicon.ico">
    
    <link rel="stylesheet" href="/css/style.css">
    <!--[if lt IE 9]>
    <script src="/js/html5.js"></script>
    <![endif]-->
    
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?fd459238242776d173cdc64918fb32f2";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>


</head>
</html>
<body class="home">
    <!--[if lt IE 9]>
    <div class="browsehappy">
        当前网页 <strong>不支持</strong>
        你正在使用的浏览器. 为了正常的访问, 请 <a href="http://browsehappy.com/">升级你的浏览器</a>.
    </div>
    <![endif]-->

    <!-- 博客头部 -->
    <header class="header">
    <section class="container header-main">
        <div class="logo">
            <a href="/">
                <div class="cover">
                    <span class="name">软件开发吧</span>
                    <span class="description"></span>
                </div>
            </a>
        </div>
        <div class="dropnav icon-paragraph-justify" id="JELON__btnDropNav"></div>
        <ul class="menu hidden" id="JELON__menu">
            
            <li rel="/archives/2015/page/7/index.html" class="item ">
                <a href="/" title="首页" class="icon-home">&nbsp;首页</a>
            </li>
            
            <li rel="/archives/2015/page/7/index.html" class="item ">
                <a href="/lab/" title="实验室" class="icon-lab">&nbsp;实验室</a>
            </li>
            
            <li rel="/archives/2015/page/7/index.html" class="item ">
                <a href="/about/" title="关于" class="icon-about">&nbsp;关于</a>
            </li>
            
            <li rel="/archives/2015/page/7/index.html" class="item ">
                <a href="/comment/" title="留言" class="icon-comment">&nbsp;留言</a>
            </li>
            
        </ul>
        <div class="profile clearfix">
            <div class="feeds fl">
                
                
                <p class="links">
                    
                        <a href="https://github.com/cdneitui" target="_blank">Github</a>
                        |
                    
                        <a href="https://pages.github.com/" target="_blank">Hosted by GitHub Pages</a>
                        
                    
                </p>
                <p class="sns">
                    
                    <a href="javascript: void(0);" class="wechat">
                        <b>■</b>
                        公众号
                        <span class="popover">
                            <img src="/img/wechat_mp.jpg" width="120" height="120" alt="我的微信订阅号">
                            <i class="arrow"></i>
                        </span>
                    </a>
                </p>
                
            </div>
            <div class="avatar fr">
                <img src="/img/jelon.jpg" alt="avatar" title="Jelon">
            </div>
        </div>
    </section>
</header>


    <!-- 博客正文 -->
    <div class="container body clearfix">
        <section class="content">
            <div class="content-main widget">
                <!-- 文章归档 -->

    <h3 class="widget-hd">
        <strong>
            
                文章归档
                <!-- 文章归档，可以根据日期分类 -->
            
        </strong>
    </h3>
    
        <!-- 文章列表 item -->
<article class="post">
    <header>
        <!-- 标签这有且只能显示一个 -->
        
        <a class="cat-link" href="/categories/Oracle/">Oracle</a>
        
        <!-- 文章标题 -->
        
    <h3 class="post-title">
    	<a href="/2015/09/06/2019030500025/">
    		打开pl/sql developer出现NLS_LANG和字符集(Character set)问题
    	</a>
    </h3>

    </header>
    <p class="post-meta">
        Jelon 发表于
        <time datetime="2015-09-06T09:29:48.000Z">2015-09-06</time>
        &nbsp;&nbsp;
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/Character-set/" title="Character set">Character set</a> / 
    
        <a href="/tags/NLS-LANG/" title="NLS_LANG">NLS_LANG</a>
    

        </span>
    </p>

    <div class="post-content">
        <div class="post-excerpt">
            
                <blockquote>
<h1 id="打开pl-sql-developer出现NLS-LANG和字符集-Character-set-问题"><a href="#打开pl-sql-developer出现NLS-LANG和字符集-Character-set-问题" class="headerlink" title="打开pl/sql developer出现NLS_LANG和字符集(Character  set)问题"></a>打开pl/sql developer出现NLS_LANG和字符集(Character  set)问题</h1><pre><code>公司最近培训pl/sql，我安装完毕后打开，遇到如图问题。
</code></pre><p><img src="http://img.blog.csdn.net/20150904093840189?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt></p>
<pre><code>PS：我的操作系统是英文的。

这是因为系统没有设置NLS_LANG系统变量。有两种方式查看。
</code></pre><p>1. 查看电脑属性。</p>
<p><img src="http://img.blog.csdn.net/20150904094431591?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt></p>
<p>2. 命令行查看。</p>
<p><img src="http://img.blog.csdn.net/20150904094853527?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt></p>
<pre><code>PS：这里我已经设置过了，所以仅仅是作个示意。

如果遇到如下图中的问题，说明客户端字符集与Oracle数据库的字符集不同。
</code></pre><p><img src="http://img.blog.csdn.net/20150904104459368?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt></p>
<pre><code>查看数据库的字符集的方法：
</code></pre><p><img src="http://img.blog.csdn.net/20150904104606224?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt></p>
<pre><code>对方的pl/sql语句是：
</code></pre><p><strong>[sql]</strong></p>
<ol>
<li>Select * from V$NLS_PARAMETERS where PARAMETER=’NLS_CHARACTERSET’;</li>
<li>Select USERENV(‘LANGUAGE’) from DUAL;</li>
</ol>
<p>将NLS_LANG的值改为所查到的SIMPLIFIED CHINESE_CHINA.UTF8即可。</p>
<p>PS：我们简介一下字符集的含义。以SIMPLIFIED CHINESE_CHINA.UTF8为例。</p>
<ul>
<li>SIMPLIFIED CHINESE为语言（简体中文）；</li>
<li>CHINA为国家（中国）；</li>
<li>UTF8为字符编码；</li>
</ul>
</blockquote>

            
            <p class="more">
                <a href="/2015/09/06/2019030500025/">阅读剩下更多</a>
            </p>
        </div>
        <div class="post-thumbnail" data-img>
            <a href="/2015/09/06/2019030500025/" title="打开pl/sql developer出现NLS_LANG和字符集(Character set)问题">
                
                    <img class="thumbnail" src="/img/default.png" data-echo="/img/thumbnail/6.jpg" alt="默认配图">
                
            </a>
        </div>
    </div>
</article>

    
        <!-- 文章列表 item -->
<article class="post">
    <header>
        <!-- 标签这有且只能显示一个 -->
        
        <a class="cat-link" href="/categories/NOSQL/">NOSQL</a>
        
        <!-- 文章标题 -->
        
    <h3 class="post-title">
    	<a href="/2015/09/06/2019030500056/">
    		mongodb常用命令
    	</a>
    </h3>

    </header>
    <p class="post-meta">
        Jelon 发表于
        <time datetime="2015-09-06T09:26:01.000Z">2015-09-06</time>
        &nbsp;&nbsp;
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/MongoDB/" title="MongoDB">MongoDB</a> / 
    
        <a href="/tags/ubuntu/" title="ubuntu">ubuntu</a>
    

        </span>
    </p>

    <div class="post-content">
        <div class="post-excerpt">
            
                <p>mongodb由C＋＋写就，其名字来自hu<strong>mongo</strong>us这个单词的中间部分，从名字可见其野心所在就是海量数据的处理。关于它的一个最简洁描述为：scalable, high-performance, open source,  schema-free, document-oriented database。MongoDB的主要目标是在键/值存储方式（提供了高性能和高度伸缩性）以及传统的RDBMS系统（丰富的功能）架起一座桥梁，集两者的优势于一身。   <strong>安装及使用：</strong> 首先在Ubuntu上安装MongoDB。 <a href="http://www.mongodb.org/display/DOCS/Downloads" target="_blank" rel="noopener">下载MongoDB</a>, 现在最新的生产版本1.7.0</p>
<ol>
<li>解压文件.</li>
</ol>
<p>$ tar  -xvf mongodb-linux-i686-1.4.3.tgz</p>
<ol start="2">
<li>为MongoDB创建数据目录，默认情况下它将数据存储在/data/db</li>
</ol>
<p>$ sudo mkdir -p  /data/db/</p>
<p>$  sudo chown `id -u` /data/db</p>
<ol start="3">
<li>启动MongoDB服务.</li>
</ol>
<p>$ cd  mongodb-linux-i686-1.4.3/bin</p>
<p>$  ./mongod</p>
<ol start="4">
<li>打开另一个终端，并确保你在MongoDB的bin目录，输入如下命令.</li>
</ol>
<p>$  ./mongo</p>
<h3 id="一些概念"><a href="#一些概念" class="headerlink" title="一些概念"></a><strong>一些概念</strong></h3><p>一个mongod服务可以有建立多个数据库，每个数据库可以有多张表，这里的表名叫collection，每个collection可以存放多个文档（document），每个文档都以BSON（binary  json）的形式存放于硬盘中，因此可以存储比较复杂的数据类型。它是以单文档为单位存储的，你可以任意给一个或一批文档新增或删除字段，而不会对其它文档造成影响，这就是所谓的schema-free，这也是文档型数据库最主要的优点。跟一般的key-value数据库不一样的是，它的value中存储了结构信息，所以你又可以像关系型数据库那样对某些域进行读写、统计等操作。Mongo最大的特点是他支持的查询语言非常强大，其语法有点类似于面向对象的查询语言，几乎可以实现类似关系数据库单表查询的绝大部分功能，而且还支持对数据建立索引。Mongo还可以解决海量数据的查询效率，根据官方文档，当数据量达到50GB以上数据时，Mongo数据库访问速度是MySQL10  倍以上。</p>
<p><strong>BSON</strong> BSON是Binary JSON  的简称，是一个JSON文档对象的二进制编码格式。BSON同JSON一样支持往其它文档对象和数组中再插入文档对象和数组，同时扩展了JSON的数据类型。如：BSON有Date类型和BinDate类型。 BSON被比作二进制的交换格式，如同Protocol  Buffers，但BSON比它更“schema-less”，非常好的灵活性但空间占用稍微大一点。 BSON有以下三个特点： 1．   轻量级 2．   跨平台 3．   效率高 <strong>命名空间</strong> MongoDB存储BSON对象到collections,这一系列的数据库名和collection名被称为一个命名空间。如同：java.util.List;用来管理数据库中的数据。</p>
<h3 id="索引"><a href="#索引" class="headerlink" title="索引"></a><strong>索引</strong></h3><p>mongodb可以对某个字段建立索引，可以建立组合索引、唯一索引，也可以删除索引，建立索引就意味着增加空间开销。默认情况下每个表都会有一个唯一索引：_id，如果插入数据时没有指定_id，服务会自动生成一个_id，为了充分利用已有索引，减少空间开销，最好是自己指定一个unique的key为_id，通常用对象的ID比较合适，比如商品的ID。 <strong>shell操作数据库：</strong>   1.   超级用户相关： 1. #进入数据库admin use admin 2. #增加或修改用户密码 db.addUser(‘name’,’pwd’) 3. #查看用户列表 db.system.users.find() 4. #用户认证 db.auth(‘name’,’pwd’) 5. #删除用户 db.removeUser(‘name’) 6.  #查看所有用户 show users 7. #查看所有数据库 show dbs 8. #查看所有的collection show collections 9. #查看各collection的状态 db.printCollectionStats() 10. #查看主从复制状态 db.printReplicationInfo() 11. #修复数据库 db.repairDatabase() 12. #设置记录profiling，0=off 1=slow 2=all db.setProfilingLevel(1) 13. #查看profiling show profile 14. #拷贝数据库 db.copyDatabase(‘mail_addr’,’mail_addr_tmp’) 15. #删除collection db.mail_addr.drop() 16. #删除当前的数据库 db.dropDatabase()   2. 增删改 1.  #存储嵌套的对象 db.foo.save({‘name’:’ysz’,’address’:{‘city’:’beijing’,’post’:100096},’phone’:[138,139]})   2. #存储数组对象 db.user_addr.save({‘Uid’:<a href="mailto:&#39;yushunzhi@sohu.com">&#39;yushunzhi@sohu.com</a>‘,’Al’:[<a href="mailto:&#39;test-1@sohu.com">&#39;test-1@sohu.com</a>‘,<a href="mailto:&#39;test-2@sohu.com">&#39;test-2@sohu.com</a>‘]})   3. #根据query条件修改，如果不存在则插入，允许修改多条记录 db.foo.update({‘yy’:5},{‘$set’:{‘xx’:2}},upsert=true,multi=true) 4. #删除yy=5的记录 db.foo.remove({‘yy’:5}) 5. #删除所有的记录 db.foo.remove()   3. 索引 1. #增加索引：1(ascending),-1(descending) 2. db.foo.ensureIndex({firstname: 1, lastname:  1}, {unique: true}); 3. #索引子对象 4. db.user_addr.ensureIndex({‘Al.Em’:  1}) 5. #查看索引信息 6. db.foo.getIndexes() 7. db.foo.getIndexKeys() 8. #根据索引名删除索引 9. db.user_addr.dropIndex(‘Al.Em_1’)   4. 查询 1. #查找所有 2. db.foo.find() 3. #查找一条记录 4. db.foo.findOne() 5. #根据条件检索10条记录 6. db.foo.find({‘msg’:’Hello 1’}).limit(10) 7. #sort排序 8.  db.deliver_status.find({‘From’:<a href="mailto:&#39;ixigua@sina.com">&#39;ixigua@sina.com</a>‘}).sort({‘Dt’,-1}) 9.  db.deliver_status.find().sort({‘Ct’:-1}).limit(1) 10. #count操作 11. db.user_addr.count() 12. #distinct操作,查询指定列，去重复 13. db.foo.distinct(‘msg’) 14. #”&gt;=”操作 15. db.foo.find({“timestamp”: {“$gte” : 2}}) 16. #子对象的查找 17. db.foo.find({‘address.city’:’beijing’}) 5. 管理 1. #查看collection数据的大小 2. db.deliver_status.dataSize() 3. #查看colleciont状态 4. db.deliver_status.stats() 5. #查询所有索引的大小 6.  db.deliver_status.totalIndexSize()   5.  advanced queries:高级查询 条件操作符 $gt  : &gt; $lt : &lt; $gte: &gt;= $lte: &lt;= $ne :  !=、&lt;&gt; $in  : in $nin: not in $all: all $not: 反匹配(1.3.3及以上版本) 查询 name &lt;&gt; “bruce” and age &gt;= 18 的数据 db.users.find({name:  {$ne: “bruce”}, age: {$gte: 18}}); 查询 creation_date &gt; ‘2010-01-01’ and creation_date &lt;= ‘2010-12-31’  的数据 db.users.find({creation_date:{$gt:new  Date(2010,0,1), $lte:new Date(2010,11,31)}); 查询 age in (20,22,24,26) 的数据 db.users.find({age:  {$in: [20,22,24,26]}}); 查询 age取模10等于0  的数据 db.users.find(‘this.age  % 10 == 0’); 或者 db.users.find({age  : {$mod : [10, 0]}}); 匹配所有 db.users.find({favorite_number  : {$all : [6, 8]}}); 可以查询出{name:  ‘David’, age: 26, favorite_number: [ 6, 8, 9 ]  } 可以不查询出{name:  ‘David’, age: 26, favorite_number: [ 6, 7, 9 ]  } 查询不匹配name=B<em>带头的记录 db.users.find({name:  {$not: /^B.</em>/}}); 查询 age取模10不等于0  的数据 db.users.find({age  : {$not: {$mod : [10, 0]}}}); #返回部分字段 选择返回age和_id字段(_id字段总是会被返回) db.users.find({},  {age:1}); db.users.find({}, {age:3}); db.users.find({},  {age:true}); db.users.find({ name : “bruce” },  {age:1}); 0为false,  非0为true 选择返回age、address和_id字段 db.users.find({  name : “bruce” }, {age:1, address:1}); 排除返回age、address和_id字段 db.users.find({},  {age:0, address:false}); db.users.find({ name : “bruce” }, {age:0,  address:false}); 数组元素个数判断 对于{name:  ‘David’, age: 26, favorite_number: [ 6, 7, 9 ] }记录 匹配db.users.find({favorite_number:  {$size: 3}}); 不匹配db.users.find({favorite_number:  {$size: 2}}); $exists判断字段是否存在 查询所有存在name字段的记录 db.users.find({name:  {$exists: true}}); 查询所有不存在phone字段的记录 db.users.find({phone:  {$exists: false}}); $type判断字段类型 查询所有name字段是字符类型的 db.users.find({name:  {$type: 2}}); 查询所有age字段是整型的 db.users.find({age:  {$type: 16}}); 对于字符字段，可以使用正则表达式 查询以字母b或者B带头的所有记录 db.users.find({name:  /^b.<em>/i}); $elemMatch(1.3.1及以上版本) 为数组的字段中匹配其中某个元素 Javascript查询和$where查询 查询 age &gt; 18 的记录，以下查询都一样 db.users.find({age:  {$gt: 18}}); db.users.find({$where: “this.age &gt;  18”}); db.users.find(“this.age &gt; 18”); f = function() {return  this.age &gt; 18} db.users.find(f); 排序sort() 以年龄升序asc db.users.find().sort({age:  1}); 以年龄降序desc db.users.find().sort({age:  -1}); 限制返回记录数量limit() 返回5条记录 db.users.find().limit(5); 返回3条记录并打印信息 db.users.find().limit(3).forEach(function(user)  {print(‘my age is ‘ + user.age)}); 结果 my  age is 18 my age is 19 my age is  20 限制返回记录的开始点skip() 从第3条记录开始，返回5条记录(limit  3,  5) db.users.find().skip(3).limit(5); 查询记录条数count() db.users.find().count(); db.users.find({age:18}).count(); 以下返回的不是5，而是user表中所有的记录数量 db.users.find().skip(10).limit(5).count(); 如果要返回限制之后的记录数量，要使用count(true)或者count(非0) db.users.find().skip(10).limit(5).count(true); 分组group() 假设test表只有以下一条数据 {  domain: “<a href="http://www.mongodb.org&quot;" target="_blank" rel="noopener">www.mongodb.org&quot;</a> , invoked_at: {d:”2009-11-03”, t:”17:14:05”} ,  response_time: 0.05 , http_action: “GET  /display/DOCS/Aggregation” } 使用group统计test表11月份的数据count:count(</em>)、total_time:sum(response_time)、avg_time:total_time/count; db.test.group( {  cond: {“invoked_at.d”: {$gt: “2009-11”, $lt: “2009-12”}} , key:  {http_action: true} , initial: {count: 0, total_time:0} , reduce:  function(doc, out){ out.count++; out.total_time+=doc.response_time } ,  finalize: function(out){ out.avg_time = out.total_time / out.count } }  ); [ { “http_action” : “GET  /display/DOCS/Aggregation”, “count” : 1, “total_time” :  0.05, “avg_time” : 0.05 } ] </p>
<p><strong>Java  应用示例</strong></p>
<p>要使用Java操作MongoDB的话，要到官方网站下载一个驱动包，把包导入后，可以尝试来操作了（记得一定要开着服务器）</p>
<p>首先介绍一下比较常用的几个类</p>
<p><strong>Mongo</strong>：连接服务器，执行一些数据库操作的选项，如新建立一个数据库等</p>
<p><strong>DB</strong>：对应一个数据库，可以用来建立集合等操作</p>
<p><strong>DBCollection</strong>：对应一个集合（类似表），可能是我们用得最多的，可以添加删除记录等</p>
<p><strong>DBObjec</strong>：接口和BasicDBObject对象：表示一个具体的记录，BasicDBObject实现了DBObject，因为是key-value的数据结构，所以用起来其实和HashMap是基本一致的</p>
<p><strong>DBCursor</strong>：用来遍历取得的数据，实现了Iterable和Iterator</p>
<p>接下来实际的操作一下，代码如下：</p>
<ol>
<li><p>import java.net.UnknownHostException;</p>
</li>
<li><p>import java.util.List;</p>
</li>
<li><p>import java.util.Set;</p>
</li>
<li><p>import com.mongodb.BasicDBObject;</p>
</li>
<li><p>import com.mongodb.DB;</p>
</li>
<li><p>import com.mongodb.DBCollection;</p>
</li>
<li><p>import com.mongodb.DBCursor;</p>
</li>
<li><p>import com.mongodb.DBObject;</p>
</li>
<li><p>import com.mongodb.Mongo;</p>
</li>
<li><p>import com.mongodb.MongoException;</p>
</li>
<li><p>public class MongoDbTest {</p>
</li>
<li><p>public static void main(String[] args)  throws UnknownHostException, MongoException {</p>
</li>
<li><p>//Mongo m = new  Mongo(); </p>
</li>
<li><p>//Mongo m = new Mongo(“localhost”); </p>
</li>
<li><p>//获得数据库服务</p>
</li>
<li><p>Mongo m = new Mongo(“localhost”, 27017);</p>
</li>
<li><p>//得到数据库mytest</p>
</li>
<li><p>DB db = m.getDB(“mytest”);</p>
</li>
<li><p>//得到mytest数据库下所有表名</p>
</li>
<li><p>Set<string> colls =  db.getCollectionNames();</string></p>
</li>
<li><p>for (String s : colls) {</p>
</li>
<li><p>System.out.println(s);</p>
</li>
<li><p>}</p>
</li>
<li><p>//得到testCollection表</p>
</li>
<li><p>DBCollection coll = db.getCollection(“testCollection”);</p>
</li>
<li><p>//new 一个BasicDBObject对象doc</p>
</li>
<li><p>BasicDBObject doc = new BasicDBObject();</p>
</li>
<li><p>//赋值</p>
</li>
<li><p>doc.put(“name”, “MongoDB”);</p>
</li>
<li><p>doc.put(“type”, “database”);</p>
</li>
<li><p>doc.put(“count”, 1);</p>
</li>
<li><p>//又new  一个BasicDBObject对象info</p>
</li>
<li><p>BasicDBObject info = new BasicDBObject();</p>
</li>
<li><p>info.put(“x”, 203);</p>
</li>
<li><p>info.put(“y”, 102);</p>
</li>
<li><p>//把info放入doc</p>
</li>
<li><p>doc.put(“info”, info);</p>
</li>
<li><p>//向testCollection表中插入一条数据</p>
</li>
<li><p>coll.insert(doc);</p>
</li>
<li><p>//查询一条数据</p>
</li>
<li><p>DBObject myDoc = coll.findOne();</p>
</li>
<li><p>System.out.println(myDoc);</p>
</li>
<li><p>//循环插入100条数据到testCollection</p>
</li>
<li><p>for (int i=0; i &lt; 100; i++)  {</p>
</li>
<li><p>coll.insert(new BasicDBObject().append(“i”,  i));</p>
</li>
<li><p>}</p>
</li>
<li><p>//Counting Documents in  A Collection </p>
</li>
<li><p>System.out.println(coll.getCount());</p>
</li>
<li><p>//Using a Cursor to Get  All the Documents </p>
</li>
<li><p>DBCursor cur = coll.find();</p>
</li>
<li><p>while(cur.hasNext()) {</p>
</li>
<li>}</li>
</ol>

            
            <p class="more">
                <a href="/2015/09/06/2019030500056/">阅读剩下更多</a>
            </p>
        </div>
        <div class="post-thumbnail" data-img>
            <a href="/2015/09/06/2019030500056/" title="mongodb常用命令">
                
                    <img class="thumbnail" src="/img/default.png" data-echo="/img/thumbnail/6.jpg" alt="默认配图">
                
            </a>
        </div>
    </div>
</article>

    
        <!-- 文章列表 item -->
<article class="post">
    <header>
        <!-- 标签这有且只能显示一个 -->
        
        <a class="cat-link" href="/categories/SQL-Server/">SQL Server</a>
        
        <!-- 文章标题 -->
        
    <h3 class="post-title">
    	<a href="/2015/09/01/2019030500162/">
    		SQL Server 2012 未将对象引用设置到对象的实例。
    	</a>
    </h3>

    </header>
    <p class="post-meta">
        Jelon 发表于
        <time datetime="2015-09-01T07:54:53.000Z">2015-09-01</time>
        &nbsp;&nbsp;
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/SQL-Server/" title="SQL Server">SQL Server</a>
    

        </span>
    </p>

    <div class="post-content">
        <div class="post-excerpt">
            
                <blockquote>
<p>1、错误描述 <img src="http://img.blog.csdn.net/20150831214339516?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt> <img src="http://img.blog.csdn.net/20150831214354172?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt> 2、错误原因 创建了student数据库后，使用数据库时出现语法错误 use student; 3、解决办法 （1）重装SQL Server 2012</p>
</blockquote>

            
            <p class="more">
                <a href="/2015/09/01/2019030500162/">阅读剩下更多</a>
            </p>
        </div>
        <div class="post-thumbnail" data-img>
            <a href="/2015/09/01/2019030500162/" title="SQL Server 2012 未将对象引用设置到对象的实例。">
                
                    <img class="thumbnail" src="/img/default.png" data-echo="/img/thumbnail/1.jpg" alt="默认配图">
                
            </a>
        </div>
    </div>
</article>

    
        <!-- 文章列表 item -->
<article class="post">
    <header>
        <!-- 标签这有且只能显示一个 -->
        
        <a class="cat-link" href="/categories/MySQL/">MySQL</a>
        
        <!-- 文章标题 -->
        
    <h3 class="post-title">
    	<a href="/2015/09/01/2019030500117/">
    		mysql5.6和mysql5.7分配undo回滚段的区别
    	</a>
    </h3>

    </header>
    <p class="post-meta">
        Jelon 发表于
        <time datetime="2015-09-01T07:36:52.000Z">2015-09-01</time>
        &nbsp;&nbsp;
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/mysql5-6/" title="mysql5.6">mysql5.6</a> / 
    
        <a href="/tags/mysql5-7/" title="mysql5.7">mysql5.7</a> / 
    
        <a href="/tags/undo/" title="undo">undo</a>
    

        </span>
    </p>

    <div class="post-content">
        <div class="post-excerpt">
            
                <p>1、mysql5.7中分为2类：临时表空间回滚段和普通回滚段。 2、mysql5.6中没有区分。 As of <strong>MySQL 5.7.2</strong>, 32 undo logs are reserved for use by temporary tables and are hosted in the temporary table tablespace (<code>ibtmp1</code>). To allocate additional undo logs for data-modifying transactions that generate undo records,<code>innodb_undo_logs</code> must be set to a value greater than 32 if undo logs are stored in the system tablespace only. If you have configured separate undo tablespaces, <code>innodb_undo_logs</code> must be set to a value greater than 33 to allocate additional undo logs for data-modifying transactions. Each undo log can host up to a maximum of 1024 transactions. 如果undo log存储在系统表空间，innodb_undo_logs值必须大于32 否则独立存储的话必须大于3。 参考： <a href="http://www.tuicool.com/articles/IzQNRrz" target="_blank" rel="noopener">http://www.tuicool.com/articles/IzQNRrz</a> <a href="http://dev.mysql.com/doc/refman/5.7/en/innodb-parameters.html#sysvar\_innodb\_undo\_logs" target="_blank" rel="noopener">http://dev.mysql.com/doc/refman/5.7/en/innodb-parameters.html#sysvar\_innodb\_undo\_logs</a> <a href="http://dev.mysql.com/doc/refman/5.6/en/innodb-parameters.html#sysvar\_innodb\_undo\_logs" target="_blank" rel="noopener">http://dev.mysql.com/doc/refman/5.6/en/innodb-parameters.html#sysvar\_innodb\_undo\_logs</a> <a href="http://bbs.aliyun.com/read/244045.html?spm=5176.7189909.0.0.AB00as" target="_blank" rel="noopener">http://bbs.aliyun.com/read/244045.html?spm=5176.7189909.0.0.AB00as</a></p>

            
            <p class="more">
                <a href="/2015/09/01/2019030500117/">阅读剩下更多</a>
            </p>
        </div>
        <div class="post-thumbnail" data-img>
            <a href="/2015/09/01/2019030500117/" title="mysql5.6和mysql5.7分配undo回滚段的区别">
                
                    <img class="thumbnail" src="/img/default.png" data-echo="/img/thumbnail/1.jpg" alt="默认配图">
                
            </a>
        </div>
    </div>
</article>

    
        <!-- 文章列表 item -->
<article class="post">
    <header>
        <!-- 标签这有且只能显示一个 -->
        
        <a class="cat-link" href="/categories/MySQL/">MySQL</a>
        
        <!-- 文章标题 -->
        
    <h3 class="post-title">
    	<a href="/2015/09/01/2019030500077/">
    		mysql备份与还原
    	</a>
    </h3>

    </header>
    <p class="post-meta">
        Jelon 发表于
        <time datetime="2015-09-01T07:35:13.000Z">2015-09-01</time>
        &nbsp;&nbsp;
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/MySQL/" title="MySQL">MySQL</a> / 
    
        <a href="/tags/数据库/" title="数据库">数据库</a> / 
    
        <a href="/tags/mysqldump/" title="mysqldump">mysqldump</a> / 
    
        <a href="/tags/mysql备份/" title="mysql备份">mysql备份</a> / 
    
        <a href="/tags/mysql还原/" title="mysql还原">mysql还原</a>
    

        </span>
    </p>

    <div class="post-content">
        <div class="post-excerpt">
            
                <blockquote>
<h1 id="1-mysqldump"><a href="#1-mysqldump" class="headerlink" title="1.mysqldump"></a>1.mysqldump</h1><h2 id="1-1-备份方法："><a href="#1-1-备份方法：" class="headerlink" title="1.1.备份方法："></a>1.1.备份方法：</h2><p>（1）导出整个数据库并指定字符集(包括数据库中的数据）</p>
<pre><code>mysqldump -u root -p --default-character-set=utf8 dbname &gt; 存放路径 
</code></pre><p>（2）导出数据库结构（不含数据）</p>
<pre><code>mysqldump -u username -p -d dbname &gt; dbname.sql    
</code></pre><p>（3）导出数据库中的某张数据表（包含数据）</p>
<pre><code>mysqldump -u username -p dbname tablename &gt; tablename.sql    
</code></pre><p>（4）导出数据库中的某张数据表的表结构（不含数据）</p>
<pre><code>mysqldump -u username -p -d dbname tablename &gt; tablename.sql
</code></pre><h2 id="1-2-mysqldump常用参数"><a href="#1-2-mysqldump常用参数" class="headerlink" title="1.2.mysqldump常用参数"></a>1.2.mysqldump常用参数</h2><blockquote>
<p>–compatible=name 它告诉 mysqldump，导出的数据将和哪种数据库或哪个旧版本的 MySQL 服务器相兼容。值可以为 ansi、mysql323、mysql40、postgresql、oracle、mssql、db2、maxdb、no_key_options、no_tables_options、no_field_options 等，要使用几个值，用逗号将它们隔开。当然了，它并不保证能完全兼容，而是尽量兼容。</p>
<hr>
<p>–all-databases , -A 导出全部数据库mysqldump -uroot -p –all-databases</p>
<hr>
<p>–all-tablespaces , -Y导出全部表空间。mysqldump -uroot -p –all-databases</p>
<hr>
<p>–all-tablespaces–no-tablespaces , -y不导出任何表空间信息。mysqldump -uroot -p –all-databases –no-tablespaces</p>
<hr>
<p>–add-drop-database每个数据库创建之前添加drop数据库语句。mysqldump -uroot -p –all-databases –add-drop-database</p>
<hr>
<p>–add-drop-table每个数据表创建之前添加drop数据表语句。(默认为打开状态，使用–skip-add-drop-table取消选项)mysqldump -uroot -p –all-databases (默认添加drop语句)mysqldump -uroot -p –all-databases –skip-add-drop-table (取消drop语句)</p>
<hr>
<p>–add-locks在每个表导出之前增加LOCK TABLES并且之后UNLOCK TABLE。(默认为打开状态，使用–skip-add-locks取消选项)mysqldump -uroot -p –all-databases (默认添加LOCK语句)mysqldump -uroot -p –all-databases –skip-add-locks (取消LOCK语句)</p>
<hr>
<p>–comments附加注释信息。默认为打开，可以用–skip-comments取消mysqldump -uroot -p –all-databases (默认记录注释)mysqldump -uroot -p –all-databases –skip-comments (取消注释)</p>
<hr>
<p>–compact导出更少的输出信息(用于调试)。去掉注释和头尾等结构。可以使用选项：–skip-add-drop-table –skip-add-locks –skip-comments –skip-disable-keysmysqldump -uroot -p –all-databases –compact</p>
<hr>
<p>–complete-insert, -c使用完整的insert语句(包含列名称)。这么做能提高插入效率，但是可能会受到max_allowed_packet参数的影响而导致插入失败。mysqldump -uroot -p –all-databases –complete-insert</p>
<hr>
<p>–compress, -C在客户端和服务器之间启用压缩传递所有信息mysqldump -uroot -p –all-databases –compress</p>
<hr>
<p>–databases, -B导出几个数据库。参数后面所有名字参量都被看作数据库名。mysqldump -uroot -p –databases test mysql</p>
<hr>
<p>–debug输出debug信息，用于调试。默认值为：d:t:o,/tmp/mysqldump.tracemysqldump -uroot -p –all-databases –debugmysqldump -uroot -p –all-databases –debug=” d:t:o,/tmp/debug.trace”</p>
<hr>
<p>–debug-info输出调试信息并退出mysqldump -uroot -p –all-databases –debug-info</p>
<hr>
<p>–default-character-set设置默认字符集，默认值为utf8mysqldump -uroot -p –all-databases –default-character-set=latin1</p>
<hr>
<p>–delayed-insert采用延时插入方式（INSERT DELAYED）导出数据mysqldump -uroot -p –all-databases –delayed-insert</p>
<hr>
<p>–events, -E导出事件。mysqldump -uroot -p –all-databases –events</p>
<hr>
<p>–flush-logs开始导出之前刷新日志。请注意：假如一次导出多个数据库(使用选项–databases或者–all-databases)，将会逐个数据库刷新日志。除使用–lock-all-tables或者–master-data外。在这种情况下，日志将会被刷新一次，相应的所以表同时被锁定。因此，如果打算同时导出和刷新日志应该使用–lock-all-tables 或者–master-data 和–flush-logs。mysqldump -uroot -p –all-databases –flush-logs</p>
<hr>
<p>–flush-privileges在导出mysql数据库之后，发出一条FLUSH PRIVILEGES 语句。为了正确恢复，该选项应该用于导出mysql数据库和依赖mysql数据库数据的任何时候。mysqldump -uroot -p –all-databases –flush-privileges</p>
<hr>
<p>–force在导出过程中忽略出现的SQL错误。mysqldump -uroot -p –all-databases –force</p>
<hr>
<p>–host, -h需要导出的主机信息mysqldump -uroot -p –host=localhost –all-databases</p>
<hr>
<p>–ignore-table不导出指定表。指定忽略多个表时，需要重复多次，每次一个表。每个表必须同时指定数据库和表名。例如：–ignore-table=database.table1 –ignore-table=database.table2 ……mysqldump -uroot -p –host=localhost –all-databases –ignore-table=mysql.user</p>
<hr>
<p>–lock-all-tables, -x提交请求锁定所有数据库中的所有表，以保证数据的一致性。这是一个全局读锁，并且自动关闭–single-transaction 和–lock-tables 选项。mysqldump -uroot -p –host=localhost –all-databases –lock-all-tables</p>
<hr>
<p>–lock-tables, -l开始导出前，锁定所有表。用READ LOCAL锁定表以允许MyISAM表并行插入。对于支持事务的表例如InnoDB和BDB，–single-transaction是一个更好的选择，因为它根本不需要锁定表。请注意当导出多个数据库时，–lock-tables分别为每个数据库锁定表。因此，该选项不能保证导出文件中的表在数据库之间的逻辑一致性。不同数据库表的导出状态可以完全不同。mysqldump -uroot -p –host=localhost –all-databases –lock-tables</p>
<hr>
<p>–no-create-db, -n只导出数据，而不添加CREATE DATABASE 语句。mysqldump -uroot -p –host=localhost –all-databases –no-create-db</p>
<hr>
<p>–no-create-info, -t只导出数据，而不添加CREATE TABLE 语句。mysqldump -uroot -p –host=localhost –all-databases –no-create-info</p>
<hr>
<p>–no-data, -d不导出任何数据，只导出数据库表结构。mysqldump -uroot -p –host=localhost –all-databases –no-data</p>
<hr>
<p>–opt 这只是一个快捷选项，等同于同时添加 –add-drop-tables –add-locking –create-option –disable-keys –extended-insert –lock-tables –quick –set-charset 选项。本选项能让 mysqldump 很快的导出数据，并且导出的数据能很快导回。该选项默认开启，但可以用 –skip-opt 禁用。注意，如果运行 mysqldump 没有指定 –quick 或 –opt 选项，则会将整个结果集放在内存中。如果导出大数据库的话可能会出现问题</p>
</blockquote>
<h2 id="1-3-还原"><a href="#1-3-还原" class="headerlink" title="1.3.还原"></a>1.3.还原</h2><p>转载或分享请标明地址:<a href="http://blog.csdn.net/w19981220" target="_blank" rel="noopener">http://blog.csdn.net/w19981220</a> mysqldump -u用户名 -p密码 数据库 &lt; 路径 mysql -uroot -p1234 数据库名称&lt;路径 还可以使用这一种方法 首先先use 那一个数据库</p>
<pre><code>mysql&gt; source sql文件路径
</code></pre></blockquote>

            
            <p class="more">
                <a href="/2015/09/01/2019030500077/">阅读剩下更多</a>
            </p>
        </div>
        <div class="post-thumbnail" data-img>
            <a href="/2015/09/01/2019030500077/" title="mysql备份与还原">
                
                    <img class="thumbnail" src="/img/default.png" data-echo="/img/thumbnail/1.jpg" alt="默认配图">
                
            </a>
        </div>
    </div>
</article>

    
        <!-- 文章列表 item -->
<article class="post">
    <header>
        <!-- 标签这有且只能显示一个 -->
        
        <a class="cat-link" href="/categories/Oracle/">Oracle</a>
        
        <!-- 文章标题 -->
        
    <h3 class="post-title">
    	<a href="/2015/09/01/2019030500151/">
    		plsql导出导入
    	</a>
    </h3>

    </header>
    <p class="post-meta">
        Jelon 发表于
        <time datetime="2015-09-01T07:29:02.000Z">2015-09-01</time>
        &nbsp;&nbsp;
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/PL-SQL/" title="PL/SQL">PL/SQL</a>
    

        </span>
    </p>

    <div class="post-content">
        <div class="post-excerpt">
            
                <p>导出步骤： 1 tools -&gt;export user object 选择选项，导出.sql文件 2 tools -&gt;export tables-&gt; Oracle Export 选择选项导出.dmp文件 导入步骤： 1 tools-&gt;import tables-&gt;SQL Inserts 导入.sql文件 2 tools-&gt;import talbes-&gt;Oracle Import然后再导入dmp文件 数据库的导入导出成功 =======================解释===================================================================== Tools-&gt;Export User Objects导出的是建表语句（包括存储结构） Tools-&gt;Export Tables里面包含三种导出方式： 三种方式都能导出表结构以及数据，网上说三种方法有区别，如下： Oracle Export，Sql Insert，pl/sql developer 第一种是导出为.dmp的文件格式，.dmp文件是二进制的，可以跨平台，还能包含权限，效率也很不错，用得最广 第二种是导出为.sql文件的，可用文本编辑器查看，通用性比较好，但效率不如第一种，适合小数据量导入导出。尤其注意的是表中不能有大字段（blob,clob,long），如果有，会提示不能导出(提示如下： table contains one or more LONG columns cannot export in sql format,user Pl/sql developer format instead)，可以用第一种和第三种方式导出。 第三种是导出为.pde格式的，.pde为Pl/sql developer自有的文件格式，只能用Pl/sql developer自己导入导出；不能用编辑器查看。</p>

            
            <p class="more">
                <a href="/2015/09/01/2019030500151/">阅读剩下更多</a>
            </p>
        </div>
        <div class="post-thumbnail" data-img>
            <a href="/2015/09/01/2019030500151/" title="plsql导出导入">
                
                    <img class="thumbnail" src="/img/default.png" data-echo="/img/thumbnail/1.jpg" alt="默认配图">
                
            </a>
        </div>
    </div>
</article>

    
        <!-- 文章列表 item -->
<article class="post">
    <header>
        <!-- 标签这有且只能显示一个 -->
        
        <a class="cat-link" href="/categories/Oracle/">Oracle</a>
        
        <!-- 文章标题 -->
        
    <h3 class="post-title">
    	<a href="/2015/08/31/2019030500130/">
    		oracle创建外部表
    	</a>
    </h3>

    </header>
    <p class="post-meta">
        Jelon 发表于
        <time datetime="2015-08-31T08:56:59.000Z">2015-08-31</time>
        &nbsp;&nbsp;
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/Oracle/" title="Oracle">Oracle</a>
    

        </span>
    </p>

    <div class="post-content">
        <div class="post-excerpt">
            
                <blockquote>
<p>oracle db允许以只读的形式查询外部表。外部表可以存储在任何oracle db可以读取的存储设备中，其内容不在db中保存，db只保存external table的metadata，db可以查询（join、sort）external table，可以创建view、synonym，但不可以执行DML语句。 创建外部表语法create table ……orginzition external，可以把外部表假想为一个view，可以正常的做select。 analyze 和 虚拟列 表分析不使用与外部表 创建外部表语法 外部表文件： example1.txt 360,Jane,Janus,ST_CLERK,121,17-MAY-2001,3000,0,50,jjanus 361,Mark,Jasper,SA_REP,145,17-MAY-2001,8000,.1,80,mjasper 362,Brenda,Starr,AD_ASST,200,17-MAY-2001,5500,0,10,bstarr 363,Alex,Alda,AC_MGR,145,17-MAY-2001,9000,.15,80,aalda example2.txt 401,Jesse,Cromwell,HR_REP,203,17-MAY-2001,7000,0,40,jcromwel 402,Abby,Applegate,IT_PROG,103,17-MAY-2001,9000,.2,60,aapplega 403,Carol,Cousins,AD_VP,100,17-MAY-2001,27000,.3,90,ccousins 404,John,Richardson,AC_ACCOUNT,205,17-MAY-2001,5000,0,110,jrichard 创建外部表oracle可识别路径：</p>
<pre><code>SQL&gt; conn / as sysdba
SQL&gt; create directory external_dir as &apos;/u01/app/oracle/oradata/external&apos;;

Directory created.

SQL&gt; grant read，write on directory external_dir to kevin;

Grant succeeded.
</code></pre><p>外部表的使用用户kevin，创建外部表</p>
<pre><code>SQL&gt; CREATE TABLE   ex_employees
  2                     (employee_id       NUMBER(4),
  3                      first_name        VARCHAR2(20),
  4                      last_name         VARCHAR2(25),
  5                      job_id            VARCHAR2(10),
  6                      manager_id        NUMBER(4),
  7                      hire_date         DATE,
  8                      salary            NUMBER(8,2),
  9                      commission_pct    NUMBER(2,2),
10                      department_id     NUMBER(4),
11                      email             VARCHAR2(25)
12                     )
13       ORGANIZATION EXTERNAL
14       (
15         TYPE ORACLE_LOADER
16         DEFAULT DIRECTORY external_dir
17         ACCESS PARAMETERS
18         (
19           records delimited by newline
20           badfile external_dir:&apos;empxt%a_%p.bad&apos;
21           logfile  external_dir:&apos;empxt%a_%p.log&apos;
22           fields terminated by &apos;,&apos;
23           missing field values are null
24           ( employee_id, first_name, last_name, job_id, manager_id,
25             hire_date char date_format date mask &quot;dd-mon-yyyy&quot;,
26             salary, commission_pct, department_id, email
27           )
28         )
29         LOCATION (&apos;example1.txt&apos;, &apos;example2.txt&apos;)
30       )
31       PARALLEL
32       REJECT LIMIT UNLIMITED;

Table created.
</code></pre><p>创建完成后可以可以通过cats把数据导入至数据库的表中，如果数据比较多，可以开启session level parallel导入</p>
<pre><code>alter session enable parallel；
create table employee as select * from ex_employee;

EMPLOYEE_ID FIRST_NAME           LAST_NAME                 JOB_ID     MANAGER_ID HIRE_DATE     SALARY COMMISSION_PCT DEPARTMENT_ID EMAIL
----------- -------------------- ------------------------- ---------- ---------- --------- ---------- -------------- ------------- -------------------------
        360 Jane                 Janus                     ST_CLERK          121 17-MAY-01       3000              0            50 jjanus
        361 Mark                 Jasper                    SA_REP            145 17-MAY-01       8000             .1            80 mjasper
        362 Brenda               Starr                     AD_ASST           200 17-MAY-01       5500              0            10 bstarr
        363 Alex                 Alda                      AC_MGR            145 17-MAY-01       9000            .15            80 aalda

        401 Jesse                Cromwell                  HR_REP            203 17-MAY-01       7000              0            40 jcromwel
        402 Abby                 Applegate                 IT_PROG           103 17-MAY-01       9000             .2            60 aapplega
        403 Carol                Cousins                   AD_VP             100 17-MAY-01      27000             .3            90 ccousins
        404 John                 Richardson                AC_ACCOUNT        205 17-MAY-01       5000              0           110 jrichard


10 rows selected.
</code></pre></blockquote>

            
            <p class="more">
                <a href="/2015/08/31/2019030500130/">阅读剩下更多</a>
            </p>
        </div>
        <div class="post-thumbnail" data-img>
            <a href="/2015/08/31/2019030500130/" title="oracle创建外部表">
                
                    <img class="thumbnail" src="/img/default.png" data-echo="/img/thumbnail/1.jpg" alt="默认配图">
                
            </a>
        </div>
    </div>
</article>

    
        <!-- 文章列表 item -->
<article class="post">
    <header>
        <!-- 标签这有且只能显示一个 -->
        
        <a class="cat-link" href="/categories/SQL-Server/">SQL Server</a>
        
        <!-- 文章标题 -->
        
    <h3 class="post-title">
    	<a href="/2015/08/31/2019030500165/">
    		SQL Server2012无法连接到2015-0831-1223
    	</a>
    </h3>

    </header>
    <p class="post-meta">
        Jelon 发表于
        <time datetime="2015-08-31T08:54:46.000Z">2015-08-31</time>
        &nbsp;&nbsp;
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/SQL-Server/" title="SQL Server">SQL Server</a> / 
    
        <a href="/tags/MSSQLSERVER/" title="MSSQLSERVER">MSSQLSERVER</a> / 
    
        <a href="/tags/SQL-Server2012/" title="SQL Server2012">SQL Server2012</a>
    

        </span>
    </p>

    <div class="post-content">
        <div class="post-excerpt">
            
                <p>1、错误描述 <img src="http://img.blog.csdn.net/20150831140850940?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt> <img src="http://img.blog.csdn.net/20150831140904891?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt> 2、错误原因 SQL Server(MSSQLSERVER)和SQL Server Analysis Services(MSSQLSERVER)服务没有启动 3、解决办法 管理工具-服务，启动两个服务 <img src="http://img.blog.csdn.net/20150831141939971?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt></p>

            
            <p class="more">
                <a href="/2015/08/31/2019030500165/">阅读剩下更多</a>
            </p>
        </div>
        <div class="post-thumbnail" data-img>
            <a href="/2015/08/31/2019030500165/" title="SQL Server2012无法连接到2015-0831-1223">
                
                    <img class="thumbnail" src="/img/default.png" data-echo="/img/thumbnail/1.jpg" alt="默认配图">
                
            </a>
        </div>
    </div>
</article>

    
        <!-- 文章列表 item -->
<article class="post">
    <header>
        <!-- 标签这有且只能显示一个 -->
        
        <a class="cat-link" href="/categories/MySQL/">MySQL</a>
        
        <!-- 文章标题 -->
        
    <h3 class="post-title">
    	<a href="/2015/08/26/2019030500124/">
    		Oracle与Mysql数据的事务处理机制
    	</a>
    </h3>

    </header>
    <p class="post-meta">
        Jelon 发表于
        <time datetime="2015-08-26T04:55:50.000Z">2015-08-26</time>
        &nbsp;&nbsp;
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/MySQL/" title="MySQL">MySQL</a> / 
    
        <a href="/tags/事务/" title="事务">事务</a> / 
    
        <a href="/tags/Oracle/" title="Oracle">Oracle</a> / 
    
        <a href="/tags/回滚/" title="回滚">回滚</a> / 
    
        <a href="/tags/rollback/" title="rollback">rollback</a>
    

        </span>
    </p>

    <div class="post-content">
        <div class="post-excerpt">
            
                <p>相比oracle的事务处理，Mydql相对还是简单一点的，但是事务作为一项重要的安全机制在数据库里面是必不可少的，特别是里面的事务回滚机制非常的有用，不多说了，先说一下mysql的事务处理： Mysql简单的回滚： 第一步：开始事务：start transaction; 第二步：执行dml等其他的变化操作。 第三步：混滚到开始事务之前状态： rollback; 这样的话在执行完毕之后就发现之前的一些操作没有执行成功。只有commit提交之后才会真正的把数据提交。但是，还要考虑下面的两种情况，一种是服务关闭的情况，这样我们的数据回滚在没有提交的情况下是有真正的去执行，还有就是回滚是能够用一次，再次使用虽然不报错，但是不起任何作用。 如果你会说了，我想在一次事务中国实现多次回滚怎么办，这里你可以使用设置保存点： 在上面的第二步中，你可以这样一下： savepoint 保存点1（名称而已）; 然后你继续执行dml，到了耨一个地方继续savepoint 保存点2; 你是不是想通过rollback to 保存点的方式会滚到之前的状态。但是，不得不告诉你，旺旺想想的和显示的情况并不是一模一样，你会发现只能够滚滚到第一个保存 点，其他的保存点会提示不存在！ Oracle的事务处理： Oracle是不用说明开启事务的，针对dml语句，当你设置保存点，接下来的步骤如上返回到保准点同样的用commit提交事务。 但是，我这里就总结出了一个重要的原则：事务回滚只能反方向一直逆行，这个过程已然不可逆。除非提交结束事务。</p>

            
            <p class="more">
                <a href="/2015/08/26/2019030500124/">阅读剩下更多</a>
            </p>
        </div>
        <div class="post-thumbnail" data-img>
            <a href="/2015/08/26/2019030500124/" title="Oracle与Mysql数据的事务处理机制">
                
                    <img class="thumbnail" src="/img/default.png" data-echo="/img/thumbnail/6.jpg" alt="默认配图">
                
            </a>
        </div>
    </div>
</article>

    
        <!-- 文章列表 item -->
<article class="post">
    <header>
        <!-- 标签这有且只能显示一个 -->
        
        <a class="cat-link" href="/categories/MySQL/">MySQL</a>
        
        <!-- 文章标题 -->
        
    <h3 class="post-title">
    	<a href="/2015/08/25/2019030500063/">
    		mysql-cluster数据自动修复（节点崩溃期间写入其他节点数据）
    	</a>
    </h3>

    </header>
    <p class="post-meta">
        Jelon 发表于
        <time datetime="2015-08-25T10:41:59.000Z">2015-08-25</time>
        &nbsp;&nbsp;
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/MySQL/" title="MySQL">MySQL</a> / 
    
        <a href="/tags/cluster/" title="cluster">cluster</a>
    

        </span>
    </p>

    <div class="post-content">
        <div class="post-excerpt">
            
                <p>Mysql-cluster是具有故障节点恢复正常后的数据自动恢复功能的。 实验环境中包含两个data节点：分别位于46，47两台服务器上 ndb_mgm&gt; show Connected to Management Server at: localhost:1186 [ndbd(NDB)] 2 node(s) id=2 @10.186.20.46 (mysql-5.6.25 ndb-7.4.7, Nodegroup: 0) id=3 @10.186.20.47 (mysql-5.6.25 ndb-7.4.7, Nodegroup: 0, <em>) [ndb_mgmd(MGM)] 1 node(s) id=1 @10.186.20.45 (mysql-5.6.25 ndb-7.4.7) [mysqld(API)] 2 node(s) id=4 @10.186.20.46 (mysql-5.6.25 ndb-7.4.7) id=5 @10.186.20.47 (mysql-5.6.25 ndb-7.4.7) ndb_mgm&gt; 此处所说的数据自动修复是指的，在其中一个节点崩溃后，另外一个节点对外提供服务，在崩溃期间所有的数据变动（ndb表），可以在崩溃节点恢复并且假如集群后，自动同步数据。 实验过程如下： 1，检验当前数据（test.a表为ndb表） 46： mysql&gt; select </em> from a; +——+ | id | +——+ | 1 | | 2 | +——+ 2 rows in set (0.00 sec) 47： mysql&gt; select <em> from a; +——+ | id | +——+ | 1 | | 2 | +——+ 2 rows in set (0.01 sec) 2，停掉47上的sql，data节点 [root@10-186-20-47 mysql3307]# ps -ef|grep mysqld root 2216 2011 0 12:18 pts/0 00:00:00 /bin/sh ./bin/mysqld_safe –defaults-file=./my.cnf mysql 2385 2216 1 12:18 pts/0 00:01:54 /opt/mysql_s/bin/mysqld –defaults-file=./my.cnf –basedir=/opt/mysql_s/ –datadir=/opt/mysql_s/data –plugin-dir=/opt/mysql_s//lib/plugin –user=mysql –log-error=/opt/mysql_s/data/10-186-20-47.err –pid-file=/opt/mysql_s/data/10-186-20-47.pid –socket=/tmp/mysql3302.sock –port=3302 root 4979 4641 0 12:37 pts/1 00:00:00 /bin/sh ./bin/mysqld_safe –defaults-file=./my.cnf mysql 5157 4979 0 12:37 pts/1 00:00:12 /usr/local/mysql3307/bin/mysqld –defaults-file=./my.cnf –basedir=/usr/local/mysql3307 –datadir=/usr/local/mysql3307/data –plugin-dir=/usr/local/mysql3307/lib/plugin –user=mysql –log-error=/usr/local/mysql3307/data/10-186-20-47.err –pid-file=/usr/local/mysql3307/data/10-186-20-47.pid –socket=/tmp/mysql3307.sock –port=3307 root 14253 4641 0 14:44 pts/1 00:00:00 grep mysqld [root@10-186-20-47 mysql3307]# kill 2385 [root@10-186-20-47 mysql3307]# [root@10-186-20-47 mysql3307]# ps -ef|grep ndb root 7810 1 0 13:13 ? 00:00:03 ndbd –ndb-connectstring=10.186.20.45:1186 root 7811 7810 1 13:13 ? 00:01:28 ndbd –ndb-connectstring=10.186.20.45:1186 root 14312 4641 0 14:44 pts/1 00:00:00 grep ndb [root@10-186-20-47 mysql3307]# kill 7811 7810 [root@10-186-20-47 mysql3307]# 通过管理节点show命令查看是否处于不可用的状态 ndb_mgm&gt; show [ndbd(NDB)] 2 node(s) id=2 @10.186.20.46 (mysql-5.6.25 ndb-7.4.7, Nodegroup: 0, </em>) id=3 (not connected, accepting connect from 10.186.20.47) [ndb_mgmd(MGM)] 1 node(s) id=1 @10.186.20.45 (mysql-5.6.25 ndb-7.4.7) [mysqld(API)] 2 node(s) id=4 @10.186.20.46 (mysql-5.6.25 ndb-7.4.7) id=5 (not connected, accepting connect from 10.186.20.47) ndb_mgm&gt; 3，在46节点上做插入，删除操作。 mysql&gt; insert into a select 3; Query OK, 1 row affected (0.00 sec) Records: 1 Duplicates: 0 Warnings: 0 mysql&gt; delete from a where id=1; Query OK, 1 row affected (0.02 sec) mysql&gt; 4，开启47上的sql，data节点 [root@10-186-20-47 mysql_s]# ./bin/mysqld_safe –defaults-file=./my.cnf &amp; [2] 14408 [root@10-186-20-47 mysql_s]# 150825 14:46:26 mysqld_safe Logging to ‘/opt/mysql_s/data/10-186-20-47.err’. 150825 14:46:26 mysqld_safe Starting mysqld daemon with databases from /opt/mysql_s/data [root@10-186-20-47 mysql_s]# [root@10-186-20-47 mysql_s]# [root@10-186-20-47 mysql_s]# ndb ndbd ndbmtd [root@10-186-20-47 mysql_s]# ndbd –ndb-connectstring=10.186.20.45:1186 2015-08-25 14:46:54 [ndbd] INFO – Angel connected to ‘10.186.20.45:1186’ 2015-08-25 14:46:54 [ndbd] INFO – Angel allocated nodeid: 3 [root@10-186-20-47 mysql_s]# 5，检验47上数据是否同步 mysql&gt; select * from a; +——+ | id | +——+ | 2 | | 3 | +——+ 2 rows in set (0.00 sec) 数据已经自动修复。</p>

            
            <p class="more">
                <a href="/2015/08/25/2019030500063/">阅读剩下更多</a>
            </p>
        </div>
        <div class="post-thumbnail" data-img>
            <a href="/2015/08/25/2019030500063/" title="mysql-cluster数据自动修复（节点崩溃期间写入其他节点数据）">
                
                    <img class="thumbnail" src="/img/default.png" data-echo="/img/thumbnail/5.jpg" alt="默认配图">
                
            </a>
        </div>
    </div>
</article>

    

    
    <nav class="page-navigator">
        <a class="extend prev" rel="prev" href="/archives/2015/page/6/">前一页</a><a class="page-number" href="/archives/2015/">1</a><span class="space">&hellip;</span><a class="page-number" href="/archives/2015/page/5/">5</a><a class="page-number" href="/archives/2015/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/archives/2015/page/8/">8</a><a class="page-number" href="/archives/2015/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/archives/2015/page/14/">14</a><a class="extend next" rel="next" href="/archives/2015/page/8/">后一页</a>
    </nav>
    


            </div>

        </section>
        <!-- 侧栏部分 -->
<aside class="sidebar">
    <section class="widget">
        <h3 class="widget-hd"><strong>文章分类</strong></h3>
        <!-- 文章分类 -->
<ul class="widget-bd">
    
    <li>
        <a href="/categories/MySQL/">MySQL</a>
        <span class="badge">(92)</span>
    </li>
    
    <li>
        <a href="/categories/Oracle/">Oracle</a>
        <span class="badge">(40)</span>
    </li>
    
    <li>
        <a href="/categories/开发语言/">开发语言</a>
        <span class="badge">(7)</span>
    </li>
    
    <li>
        <a href="/categories/NOSQL/">NOSQL</a>
        <span class="badge">(17)</span>
    </li>
    
    <li>
        <a href="/categories/其他数据库/">其他数据库</a>
        <span class="badge">(4)</span>
    </li>
    
    <li>
        <a href="/categories/SQL-Server/">SQL Server</a>
        <span class="badge">(13)</span>
    </li>
    
    <li>
        <a href="/categories/MySQL/Oracle/">Oracle</a>
        <span class="badge">(3)</span>
    </li>
    
    <li>
        <a href="/categories/MySQL/Oracle/SQL-Server/">SQL Server</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="/categories/NOSQL/开发语言/">开发语言</a>
        <span class="badge">(1)</span>
    </li>
    
</ul>
    </section>

    
    <section class="widget">
        <h3 class="widget-hd"><strong>热门标签</strong></h3>
        <!-- 文章标签 -->
<div class="widget-bd tag-wrap">
  
    <a class="tag-item" href="/tags/MySQL/" title="MySQL">MySQL (71)</a>
  
    <a class="tag-item" href="/tags/位运算/" title="位运算">位运算 (0)</a>
  
    <a class="tag-item" href="/tags/sqlplus/" title="sqlplus">sqlplus (1)</a>
  
    <a class="tag-item" href="/tags/allow/" title="allow">allow (1)</a>
  
    <a class="tag-item" href="/tags/Apache/" title="Apache">Apache (1)</a>
  
    <a class="tag-item" href="/tags/deny/" title="deny">deny (1)</a>
  
    <a class="tag-item" href="/tags/CentOS/" title="CentOS">CentOS (2)</a>
  
    <a class="tag-item" href="/tags/druid/" title="druid">druid (1)</a>
  
    <a class="tag-item" href="/tags/心跳/" title="心跳">心跳 (1)</a>
  
    <a class="tag-item" href="/tags/事务/" title="事务">事务 (5)</a>
  
    <a class="tag-item" href="/tags/分布式/" title="分布式">分布式 (1)</a>
  
    <a class="tag-item" href="/tags/消息/" title="消息">消息 (1)</a>
  
    <a class="tag-item" href="/tags/redis/" title="redis">redis (6)</a>
  
    <a class="tag-item" href="/tags/KeepAlived/" title="KeepAlived">KeepAlived (1)</a>
  
    <a class="tag-item" href="/tags/Oracle/" title="Oracle">Oracle (30)</a>
  
    <a class="tag-item" href="/tags/schedule-job/" title="schedule job">schedule job (1)</a>
  
    <a class="tag-item" href="/tags/分库/" title="分库">分库 (1)</a>
  
    <a class="tag-item" href="/tags/分库分表/" title="分库分表">分库分表 (1)</a>
  
    <a class="tag-item" href="/tags/分表/" title="分表">分表 (1)</a>
  
    <a class="tag-item" href="/tags/SQL/" title="SQL">SQL (17)</a>
  
    <a class="tag-item" href="/tags/批量/" title="批量">批量 (1)</a>
  
    <a class="tag-item" href="/tags/数据库/" title="数据库">数据库 (7)</a>
  
    <a class="tag-item" href="/tags/结构同步/" title="结构同步">结构同步 (1)</a>
  
    <a class="tag-item" href="/tags/truncate/" title="truncate">truncate (1)</a>
  
    <a class="tag-item" href="/tags/Excel/" title="Excel">Excel (1)</a>
  
    <a class="tag-item" href="/tags/Sqlite/" title="Sqlite">Sqlite (1)</a>
  
    <a class="tag-item" href="/tags/Hash索引/" title="Hash索引">Hash索引 (1)</a>
  
    <a class="tag-item" href="/tags/InnoDB/" title="InnoDB">InnoDB (3)</a>
  
    <a class="tag-item" href="/tags/MyISAM/" title="MyISAM">MyISAM (3)</a>
  
    <a class="tag-item" href="/tags/索引优化/" title="索引优化">索引优化 (1)</a>
  
    <a class="tag-item" href="/tags/Linux/" title="Linux">Linux (2)</a>
  
    <a class="tag-item" href="/tags/FineReport/" title="FineReport">FineReport (1)</a>
  
    <a class="tag-item" href="/tags/报表/" title="报表">报表 (1)</a>
  
    <a class="tag-item" href="/tags/数据集/" title="数据集">数据集 (1)</a>
  
    <a class="tag-item" href="/tags/rowid/" title="rowid">rowid (2)</a>
  
    <a class="tag-item" href="/tags/重复/" title="重复">重复 (1)</a>
  
    <a class="tag-item" href="/tags/Character-set/" title="Character set">Character set (1)</a>
  
    <a class="tag-item" href="/tags/NLS-LANG/" title="NLS_LANG">NLS_LANG (1)</a>
  
    <a class="tag-item" href="/tags/mysqldump/" title="mysqldump">mysqldump (2)</a>
  
</div>
    </section>
    

    

    
    <!-- 友情链接 -->
    <section class="widget">
        <h3 class="widget-hd"><strong>友情链接</strong></h3>
        <!-- 文章分类 -->
<ul class="widget-bd">
    
        <li>
            <a href="http://www.devba.com" target="_blank" title="软件开发吧">软件开发吧</a>
        </li>
    
        <li>
            <a href="https://www.sqlyun.cn" target="_blank" title="SQL云笔记">SQL云</a>
        </li>
    
</ul>
    </section>
    
</aside>
<!-- / 侧栏部分 -->
    </div>

    <!-- 博客底部 -->
    <footer class="footer">
    &copy;
    
        2016-2019
    

    <a href="/">Jelon Loves You</a>
</footer>
<div class="back-to-top" id="JELON__backToTop" title="返回顶部">返回顶部</div>

    <!--博客js脚本 -->
    <!-- 这里放网站js脚本 -->
<script src="/js/main.js"></script>
</body>
</html>