<!doctype html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=11,IE=10,IE=9,IE=8">
    <meta name="baidu-site-verification" content="dIcXMeY8Ya">
    
    <title>文章归档: 2015/9 | 软件开发吧</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <meta name="keywords" content="Jelon, 前端, Web, 张德龙, 前端开发">
    <meta name="description" content="Jelon个人前端小站">

    
    <link rel="alternative" href="/atom.xml" title="软件开发吧" type="application/atom+xml">
    
    
    <link rel="shortcut icon" href="/favicon.ico">
    
    <link rel="stylesheet" href="/css/style.css">
    <!--[if lt IE 9]>
    <script src="/js/html5.js"></script>
    <![endif]-->
    
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?fd459238242776d173cdc64918fb32f2";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>


</head>
</html>
<body class="home">
    <!--[if lt IE 9]>
    <div class="browsehappy">
        当前网页 <strong>不支持</strong>
        你正在使用的浏览器. 为了正常的访问, 请 <a href="http://browsehappy.com/">升级你的浏览器</a>.
    </div>
    <![endif]-->

    <!-- 博客头部 -->
    <header class="header">
    <section class="container header-main">
        <div class="logo">
            <a href="/">
                <div class="cover">
                    <span class="name">软件开发吧</span>
                    <span class="description"></span>
                </div>
            </a>
        </div>
        <div class="dropnav icon-paragraph-justify" id="JELON__btnDropNav"></div>
        <ul class="menu hidden" id="JELON__menu">
            
            <li rel="/archives/2015/09/page/2/index.html" class="item ">
                <a href="/" title="首页" class="icon-home">&nbsp;首页</a>
            </li>
            
            <li rel="/archives/2015/09/page/2/index.html" class="item ">
                <a href="/lab/" title="实验室" class="icon-lab">&nbsp;实验室</a>
            </li>
            
            <li rel="/archives/2015/09/page/2/index.html" class="item ">
                <a href="/about/" title="关于" class="icon-about">&nbsp;关于</a>
            </li>
            
            <li rel="/archives/2015/09/page/2/index.html" class="item ">
                <a href="/comment/" title="留言" class="icon-comment">&nbsp;留言</a>
            </li>
            
        </ul>
        <div class="profile clearfix">
            <div class="feeds fl">
                
                
                <p class="links">
                    
                        <a href="https://github.com/jangdelong" target="_blank">Github</a>
                        |
                    
                        <a href="https://pages.coding.me" target="_blank">Hosted by Coding Pages</a>
                        
                    
                </p>
                <p class="sns">
                    
                        <a href="http://weibo.com/jangdelong" class="sinaweibo" target="_blank"><b>■</b> 新浪微博</a>
                    
                        <a href="https://www.facebook.com/profile.php?id=100011855760219&amp;ref=bookmarks" class="qqweibo" target="_blank"><b>■</b> Facebook</a>
                    
                    <a href="javascript: void(0);" class="wechat">
                        <b>■</b>
                        公众号
                        <span class="popover">
                            <img src="/img/wechat_mp.jpg" width="120" height="120" alt="我的微信订阅号">
                            <i class="arrow"></i>
                        </span>
                    </a>
                </p>
                
            </div>
            <div class="avatar fr">
                <img src="/img/jelon.jpg" alt="avatar" title="Jelon">
            </div>
        </div>
    </section>
</header>


    <!-- 博客正文 -->
    <div class="container body clearfix">
        <section class="content">
            <div class="content-main widget">
                <!-- 文章归档 -->

    <h3 class="widget-hd">
        <strong>
            
                文章归档
                <!-- 文章归档，可以根据日期分类 -->
            
        </strong>
    </h3>
    
        <!-- 文章列表 item -->
<article class="post">
    <header>
        <!-- 标签这有且只能显示一个 -->
        
        <a class="cat-link" href="/categories/开发语言/">开发语言</a>
        
        <!-- 文章标题 -->
        
    <h3 class="post-title">
    	<a href="/2015/09/07/2019030500061/">
    		mybatis入门小程序
    	</a>
    </h3>

    </header>
    <p class="post-meta">
        Jelon 发表于
        <time datetime="2015-09-07T04:50:45.000Z">2015-09-07</time>
        &nbsp;&nbsp;
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/Mybatis/" title="Mybatis">Mybatis</a>
    

        </span>
    </p>

    <div class="post-content">
        <div class="post-excerpt">
            
                <p>结构 <a href="https://static.oschina.net/uploads/img/201509/06204843_TTPR.png" target="_blank" rel="noopener"><img src="/uploads/2015/09/06204843_TTPR.png" alt="工程结构" title="在这里输入图片标题"></a> SqlMapConfig.xml代码</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;configuration&gt;
    &lt;environments default=&quot;development&quot;&gt;
        &lt;environment id=&quot;development&quot;&gt;
            &lt;transactionManager type=&quot;JDBC&quot;/&gt;
            &lt;dataSource type=&quot;POOLED&quot;&gt;
                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;
                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/test?characterEncoding=UTF-8&quot;/&gt;
                &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;
                &lt;property name=&quot;password&quot; value=&quot;&quot;/&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;

    &lt;mappers&gt;
        &lt;mapper resource=&quot;sqlmap/User.xml&quot;/&gt;
    &lt;/mappers&gt;
&lt;/configuration&gt;
</code></pre><p>User.xml代码</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; 
    &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;test&quot;&gt;
    &lt;!-- 根据主键查询用户 --&gt;
    &lt;select id=&quot;selectUser&quot; parameterType=&quot;int&quot; resultType=&quot;org.jay.pojo.User&quot;&gt;
        select *
        from t_user where id=#{id}
    &lt;/select&gt;

    &lt;!-- 根据用户名模糊查询用户列表 --&gt;
    &lt;select id=&quot;selectUserByName&quot; parameterType=&quot;java.lang.String&quot;
        resultType=&quot;org.jay.pojo.User&quot;&gt;
        select * from t_user where user_name like &apos;%${value}%&apos;
    &lt;/select&gt;

    &lt;!-- 新增用户并返回主键 --&gt;
    &lt;insert id=&quot;insertUser&quot; parameterType=&quot;org.jay.pojo.User&quot;&gt;
        &lt;!-- 只适用于自增主键 --&gt;
        &lt;selectKey keyProperty=&quot;id&quot; order=&quot;AFTER&quot; resultType=&quot;java.lang.Integer&quot;&gt;
            select last_insert_id()
        &lt;/selectKey&gt;
        insert into t_user(user_name,pass_word)
        values(#{user_name},#{pass_word})
    &lt;/insert&gt;

    &lt;!-- 根据主键删除用户 --&gt;
    &lt;delete id=&quot;deleteUser&quot; parameterType=&quot;int&quot;&gt;
        delete from t_user  where id=#{id}
    &lt;/delete&gt;


    &lt;!-- 根据主键更新用户 --&gt;
    &lt;update id=&quot;updateUser&quot; parameterType=&quot;org.jay.pojo.User&quot;&gt;
        update t_user set user_name=#{user_name},pass_word=#{pass_word} where id=#{id}
    &lt;/update&gt;
&lt;/mapper&gt;
</code></pre><p>User.java代码</p>
<pre><code>package org.jay.pojo;

public class User {
    private int id;
    private String user_name;
    private String pass_word;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getUser_name() {
        return user_name;
    }

    public void setUser_name(String user_name) {
        this.user_name = user_name;
    }

    public String getPass_word() {
        return pass_word;
    }

    public void setPass_word(String pass_word) {
        this.pass_word = pass_word;
    }

    public String toString(){
        return this.id+&quot;  &quot;+this.user_name+&quot;  &quot;+this.pass_word;
    }
}
</code></pre><p>log4j.properties代码</p>
<pre><code>log4j.rootLogger=BEBUG, stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%n%-d{yyyy-MM-dd HH:mm:ss}%n[%p]-[Thread: %t]-[%C.%M()]: %m%n
</code></pre><p>test.java代码(测试一下)</p>
<pre><code>package org.jay.test;

import java.io.IOException;
import java.io.InputStream;
import java.util.List;

import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;
import org.jay.pojo.User;
import org.junit.Before;
import org.junit.Test;

public class test {

    private SqlSessionFactory sessionFactory;

    @Before
    public void init() throws IOException {
        String resources = &quot;SqlMapConfig.xml&quot;;
        // 加载
        InputStream inputStream = Resources.getResourceAsStream(resources);

        // 获取工厂
        sessionFactory = new SqlSessionFactoryBuilder()
                .build(inputStream);
    }

    @Test
    public void testSelect() {
        try {
            SqlSession sqlSession = sessionFactory.openSession();

            User user = sqlSession.selectOne(&quot;test.selectUser&quot;, 1);
            System.out.println(user);

            List&lt;User&gt; userList = sqlSession.selectList(
                    &quot;test.selectUserByName&quot;, &quot;aa&quot;);
            System.out.println(userList);

            sqlSession.close();
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    @Test
    public void testInsert() {
        try {
            SqlSession sqlSession = sessionFactory.openSession();

            User intoUser = new User();
            intoUser.setUser_name(&quot;aabb&quot;);
            intoUser.setPass_word(&quot;123456&quot;);
            sqlSession.insert(&quot;test.insertUser&quot;, intoUser);

            sqlSession.commit();

            List&lt;User&gt; userList = sqlSession.selectList(
                    &quot;test.selectUserByName&quot;, &quot;aa&quot;);
            System.out.println(userList);

            sqlSession.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Test
    public void testDelete() {
        try {
            SqlSession sqlSession = sessionFactory.openSession();

            sqlSession.delete(&quot;test.deleteUser&quot;, 3);

            sqlSession.commit();

            List&lt;User&gt; userList = sqlSession.selectList(
                    &quot;test.selectUserByName&quot;, &quot;aa&quot;);
            System.out.println(userList);

            sqlSession.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Test
    public void testUpdate() {
        try {
            SqlSession sqlSession = sessionFactory.openSession();

            User user = new User();
            user.setId(3);
            user.setUser_name(&quot;aaayyy&quot;);
            user.setPass_word(&quot;123456&quot;);
            sqlSession.update(&quot;test.updateUser&quot;, user);

            sqlSession.commit();

            List&lt;User&gt; userList = sqlSession.selectList(
                    &quot;test.selectUserByName&quot;, &quot;aa&quot;);
            System.out.println(userList);

            sqlSession.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
</code></pre><p>建表语句</p>
<pre><code>create table t_user(  
id int(4) not null primary key auto_increment,
user_name char(20) not null, 
pass_word char(20) not null
);
</code></pre>
            
            <p class="more">
                <a href="/2015/09/07/2019030500061/">阅读剩下更多</a>
            </p>
        </div>
        <div class="post-thumbnail" data-img>
            <a href="/2015/09/07/2019030500061/" title="mybatis入门小程序">
                
                    <img class="thumbnail" src="/img/default.png" data-echo="/img/thumbnail/7.jpg" alt="默认配图">
                
            </a>
        </div>
    </div>
</article>

    
        <!-- 文章列表 item -->
<article class="post">
    <header>
        <!-- 标签这有且只能显示一个 -->
        
        <a class="cat-link" href="/categories/MySQL/">MySQL</a>
        
        <!-- 文章标题 -->
        
    <h3 class="post-title">
    	<a href="/2015/09/07/2019030500086/">
    		mysql 常见错误解决方式
    	</a>
    </h3>

    </header>
    <p class="post-meta">
        Jelon 发表于
        <time datetime="2015-09-07T04:48:47.000Z">2015-09-07</time>
        &nbsp;&nbsp;
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/MySQL/" title="MySQL">MySQL</a> / 
    
        <a href="/tags/mysql-1449/" title="mysql 1449">mysql 1449</a>
    

        </span>
    </p>

    <div class="post-content">
        <div class="post-excerpt">
            
                <p>mysql 1449 ： The user specified as a definer (‘root‘@’%’) does not exist 分析: 一般是由于root用户对全局host无访问权限。因此只要给root用户添加一个访问权限即可。 解决方式: <strong>grant all privileges on <em>.</em> to root@”%” identified by “.”;</strong> <strong>flush privileges;</strong> 参考: <a href="http://bbs.csdn.net/topics/390339729" target="_blank" rel="noopener">http://bbs.csdn.net/topics/390339729</a> 扩展: 阿里云数据库访问存储/视图时出现”mysql 1449”错误,解决方式, 1.使用阿里云自带的图形化界面访问数据库. 2.编辑视图/存储过程 3.设置安全性为INVOKER 4.重新保存</p>

            
            <p class="more">
                <a href="/2015/09/07/2019030500086/">阅读剩下更多</a>
            </p>
        </div>
        <div class="post-thumbnail" data-img>
            <a href="/2015/09/07/2019030500086/" title="mysql 常见错误解决方式">
                
                    <img class="thumbnail" src="/img/default.png" data-echo="/img/thumbnail/7.jpg" alt="默认配图">
                
            </a>
        </div>
    </div>
</article>

    
        <!-- 文章列表 item -->
<article class="post">
    <header>
        <!-- 标签这有且只能显示一个 -->
        
        <a class="cat-link" href="/categories/SQL-Server/">SQL Server</a>
        
        <!-- 文章标题 -->
        
    <h3 class="post-title">
    	<a href="/2015/09/07/2019030500021/">
    		报表性能优化方案之单数据集分页SQL实现层式报表
    	</a>
    </h3>

    </header>
    <p class="post-meta">
        Jelon 发表于
        <time datetime="2015-09-07T04:36:01.000Z">2015-09-07</time>
        &nbsp;&nbsp;
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/SQL/" title="SQL">SQL</a> / 
    
        <a href="/tags/FineReport/" title="FineReport">FineReport</a> / 
    
        <a href="/tags/报表/" title="报表">报表</a> / 
    
        <a href="/tags/数据集/" title="数据集">数据集</a>
    

        </span>
    </p>

    <div class="post-content">
        <div class="post-excerpt">
            
                <p><strong>1、概述</strong></p>
<p>我们知道，行式引擎按页取数只适用于Oracle,mysql,hsql和sqlserver2008及以上数据库，其他数据库，如access，sqlserver2005，sqlite等必须编写分页SQL。</p>
<p>下面以Access数据库为例介绍需要写分页SQL的数据库怎样利用行式的引擎实现层式报表。</p>
<p>解决方案提供工具：报表开发工具FineReport</p>
<p><strong>2、解决思路</strong></p>
<p>对于mysql这类可以直接使用行式的引擎实现层式报表的数据库来说，如果勾选了行式引擎，程序会自动生成分页sql，如，我新建了一个数据集ds1，来源于mysql数据库，基本sql语句为：</p>
<p><strong>SELECT * FROM 订单明细</strong></p>
<p>如果不定义分页sql，勾选行式引擎选项，预览报表时，程序会将上面的sql语句转化为下面的语句来取一页的数据：</p>
<p><strong>SELECT COUNT(<em>)AS totalRowCount FROM (SELECT </em> FROM 订单明细) t</strong></p>
<p>如果数据库是上面所说的access一类的无法直接生成分页sql的数据库，那么就需要编写分页SQL。</p>
<p><strong>3、操作步骤</strong></p>
<p>以FRDemo内置的sqlite为例，说明sqlite如何写分页查询。</p>
<p>注：sqlserver2005和sqlite操作步骤一样。</p>
<p><strong>3.1新建数据集</strong></p>
<p>新建数据集ds1：<strong>SELECT * FROM 订单明细</strong>。</p>
<p><strong>3.2添加分页查询SQL语句</strong></p>
<p>在数据查询面板中点击<strong>分页查询</strong>按钮，编辑分页SQL语句，如下图：</p>
<p><img src="http://img.blog.csdn.net/20150907100054679" alt></p>
<p>完整的sql语句如下：</p>
<p><strong>[sql]</strong></p>
<ol>
<li>SELECT *</li>
<li>FROM (</li>
<li>SELECT  *</li>
<li>FROM(</li>
<li>SELECT *</li>
<li>FROM 订单明细 ORDER BY 订单ID ASC limit ${fr_pagesize*fr_pagenumber}</li>
<li>) AS e1 ORDER BY 订单ID DESC limit ${</li>
<li>if(fr_pagenumber == int((((fr_rowcount-1)/fr_pagesize)+1)),fr_rowcount - (fr_pagesize*(fr_pagenumber-1)),fr_pagesize)</li>
<li>}</li>
<li>) AS e2 ORDER BY 订单ID ASC</li>
</ol>
<p>注：上述代码放置在分页sql面板中时，要删除后面的注释语句，并且语句中的三次ORDER BY 一定不能丢。</p>
<p>·        <strong>分页sql语句注释</strong></p>
<p><strong>${if(fr_pagenumber==int( (((fr_rowcount-1)/fr_pagesize)+1)),fr_rowcount -(fr_pagesize*(fr_pagenumber-1)),fr_pagesize)}</strong>意思是：</p>
<p>假如是最后一页的话，就取最后一页剩余的行数，假如不是最后一页就取每页需要显示的行数，示例中每页需要显示的行数为30行。</p>
<p><strong>fr_pagenumber</strong>：当前浏览的页数，如果预览第2页，则fr_pagenumber=2；</p>
<p><strong>fr_rowcount</strong>：当前数据集的总数据条数；</p>
<p><strong>fr_pagesize</strong>：表示设置行式引擎时，每页需显示的行数，该示例中fr_pagesize=30.</p>
<p>在预览时，设定的分页查询根据3个变量的值，会生成数据库查询，如fr_pagenumber=2，fr_pagesize=30时，即在web端预览报表，预览至第2页时，上面的sql语句会转化为：</p>
<p><strong>SELECT <em> FROM (SELECT </em> FROM ( SELECT * FROM 订单明细 ORDER BY 订单ID ASC limit 60 )AS e1 ORDER BY 订单ID DESClimit30 ) AS e2 ORDER BY 订单ID ASC</strong></p>
<p>预览至第3页时，fr_pagenumber=3，sql语句就转化为：</p>
<p><strong>SELECT <em> FROM (SELECT </em> FROM ( SELECT * FROM 订单明细 ORDER BY 订单ID ASC limit 90 )AS e1 ORDER BY 订单ID DESClimit30) AS e2 ORDER BY 订单ID ASC</strong></p>
<p>预览至最后一页时，所剩下的数据可能不足30行，那么sql语句又会转化成什么样呢？</p>
<p>如果fr_rowcount=100，fr_pagesize=30，即数据总行数为100行，每页显示30行，预览至最后一页，也就是第4页时，fr_pagenumber=4，sql语句将转换为：</p>
<p><strong>SELECT <em> FROM (SELECT </em> FROM ( SELECT * FROM 订单明细 ORDER BY 订单ID ASC limit 90)AS e1 ORDER BY 订单ID DESClimit10 ) AS e2 ORDER BY 订单ID ASC</strong></p>
<p><strong>3.3报表主体设计</strong></p>
<p>将数据集中的数据列拖曳至单元格中。</p>
<p><strong>3.4行式引擎设置</strong></p>
<p>同上一节的设置方法，这里不再赘述。</p>
<p><strong>3.5效果查看</strong></p>
<p>点击分页预览，效果图如下：</p>
<p>已完成模板请参照：<strong>%FR_HOME%\WebReport\WEB-INF\reportlets\doc\Advanced\PagingSql.cpt</strong></p>
<p><strong>3.6数据库的分页SQL语句</strong></p>
<p><strong>[sql]</strong></p>
<ol>
<li>SELECT *</li>
<li>FROM (</li>
<li>SELECT TOP ${</li>
<li>if(fr_pagenumber == int((((fr_rowcount-1)/fr_pagesize)+1)),fr_rowcount - (fr_pagesize*(fr_pagenumber-1)),fr_pagesize)</li>
<li>} *</li>
<li>FROM(</li>
<li>SELECT TOP ${fr_pagesize*fr_pagenumber} *</li>
<li>FROM 订单明细 ORDER BY 订单ID ASC</li>
<li>) AS e1 ORDER BY 订单ID DESC</li>
<li>) AS e2 ORDER BY 订单ID ASC</li>
</ol>

            
            <p class="more">
                <a href="/2015/09/07/2019030500021/">阅读剩下更多</a>
            </p>
        </div>
        <div class="post-thumbnail" data-img>
            <a href="/2015/09/07/2019030500021/" title="报表性能优化方案之单数据集分页SQL实现层式报表">
                
                    <img class="thumbnail" src="/img/default.png" data-echo="/img/thumbnail/7.jpg" alt="默认配图">
                
            </a>
        </div>
    </div>
</article>

    
        <!-- 文章列表 item -->
<article class="post">
    <header>
        <!-- 标签这有且只能显示一个 -->
        
        <a class="cat-link" href="/categories/Oracle/">Oracle</a>
        
        <!-- 文章标题 -->
        
    <h3 class="post-title">
    	<a href="/2015/09/06/2019030500025/">
    		打开pl/sql developer出现NLS_LANG和字符集(Character set)问题
    	</a>
    </h3>

    </header>
    <p class="post-meta">
        Jelon 发表于
        <time datetime="2015-09-06T09:29:48.000Z">2015-09-06</time>
        &nbsp;&nbsp;
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/Character-set/" title="Character set">Character set</a> / 
    
        <a href="/tags/NLS-LANG/" title="NLS_LANG">NLS_LANG</a>
    

        </span>
    </p>

    <div class="post-content">
        <div class="post-excerpt">
            
                <blockquote>
<h1 id="打开pl-sql-developer出现NLS-LANG和字符集-Character-set-问题"><a href="#打开pl-sql-developer出现NLS-LANG和字符集-Character-set-问题" class="headerlink" title="打开pl/sql developer出现NLS_LANG和字符集(Character  set)问题"></a>打开pl/sql developer出现NLS_LANG和字符集(Character  set)问题</h1><pre><code>公司最近培训pl/sql，我安装完毕后打开，遇到如图问题。
</code></pre><p><img src="http://img.blog.csdn.net/20150904093840189?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt></p>
<pre><code>PS：我的操作系统是英文的。

这是因为系统没有设置NLS_LANG系统变量。有两种方式查看。
</code></pre><p>1. 查看电脑属性。</p>
<p><img src="http://img.blog.csdn.net/20150904094431591?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt></p>
<p>2. 命令行查看。</p>
<p><img src="http://img.blog.csdn.net/20150904094853527?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt></p>
<pre><code>PS：这里我已经设置过了，所以仅仅是作个示意。

如果遇到如下图中的问题，说明客户端字符集与Oracle数据库的字符集不同。
</code></pre><p><img src="http://img.blog.csdn.net/20150904104459368?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt></p>
<pre><code>查看数据库的字符集的方法：
</code></pre><p><img src="http://img.blog.csdn.net/20150904104606224?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt></p>
<pre><code>对方的pl/sql语句是：
</code></pre><p><strong>[sql]</strong></p>
<ol>
<li>Select * from V$NLS_PARAMETERS where PARAMETER=’NLS_CHARACTERSET’;</li>
<li>Select USERENV(‘LANGUAGE’) from DUAL;</li>
</ol>
<p>将NLS_LANG的值改为所查到的SIMPLIFIED CHINESE_CHINA.UTF8即可。</p>
<p>PS：我们简介一下字符集的含义。以SIMPLIFIED CHINESE_CHINA.UTF8为例。</p>
<ul>
<li>SIMPLIFIED CHINESE为语言（简体中文）；</li>
<li>CHINA为国家（中国）；</li>
<li>UTF8为字符编码；</li>
</ul>
</blockquote>

            
            <p class="more">
                <a href="/2015/09/06/2019030500025/">阅读剩下更多</a>
            </p>
        </div>
        <div class="post-thumbnail" data-img>
            <a href="/2015/09/06/2019030500025/" title="打开pl/sql developer出现NLS_LANG和字符集(Character set)问题">
                
                    <img class="thumbnail" src="/img/default.png" data-echo="/img/thumbnail/6.jpg" alt="默认配图">
                
            </a>
        </div>
    </div>
</article>

    
        <!-- 文章列表 item -->
<article class="post">
    <header>
        <!-- 标签这有且只能显示一个 -->
        
        <a class="cat-link" href="/categories/NOSQL/">NOSQL</a>
        
        <!-- 文章标题 -->
        
    <h3 class="post-title">
    	<a href="/2015/09/06/2019030500056/">
    		mongodb常用命令
    	</a>
    </h3>

    </header>
    <p class="post-meta">
        Jelon 发表于
        <time datetime="2015-09-06T09:26:01.000Z">2015-09-06</time>
        &nbsp;&nbsp;
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/MongoDB/" title="MongoDB">MongoDB</a> / 
    
        <a href="/tags/ubuntu/" title="ubuntu">ubuntu</a>
    

        </span>
    </p>

    <div class="post-content">
        <div class="post-excerpt">
            
                <p>mongodb由C＋＋写就，其名字来自hu<strong>mongo</strong>us这个单词的中间部分，从名字可见其野心所在就是海量数据的处理。关于它的一个最简洁描述为：scalable, high-performance, open source,  schema-free, document-oriented database。MongoDB的主要目标是在键/值存储方式（提供了高性能和高度伸缩性）以及传统的RDBMS系统（丰富的功能）架起一座桥梁，集两者的优势于一身。   <strong>安装及使用：</strong> 首先在Ubuntu上安装MongoDB。 <a href="http://www.mongodb.org/display/DOCS/Downloads" target="_blank" rel="noopener">下载MongoDB</a>, 现在最新的生产版本1.7.0</p>
<ol>
<li>解压文件.</li>
</ol>
<p>$ tar  -xvf mongodb-linux-i686-1.4.3.tgz</p>
<ol start="2">
<li>为MongoDB创建数据目录，默认情况下它将数据存储在/data/db</li>
</ol>
<p>$ sudo mkdir -p  /data/db/</p>
<p>$  sudo chown `id -u` /data/db</p>
<ol start="3">
<li>启动MongoDB服务.</li>
</ol>
<p>$ cd  mongodb-linux-i686-1.4.3/bin</p>
<p>$  ./mongod</p>
<ol start="4">
<li>打开另一个终端，并确保你在MongoDB的bin目录，输入如下命令.</li>
</ol>
<p>$  ./mongo</p>
<h3 id="一些概念"><a href="#一些概念" class="headerlink" title="一些概念"></a><strong>一些概念</strong></h3><p>一个mongod服务可以有建立多个数据库，每个数据库可以有多张表，这里的表名叫collection，每个collection可以存放多个文档（document），每个文档都以BSON（binary  json）的形式存放于硬盘中，因此可以存储比较复杂的数据类型。它是以单文档为单位存储的，你可以任意给一个或一批文档新增或删除字段，而不会对其它文档造成影响，这就是所谓的schema-free，这也是文档型数据库最主要的优点。跟一般的key-value数据库不一样的是，它的value中存储了结构信息，所以你又可以像关系型数据库那样对某些域进行读写、统计等操作。Mongo最大的特点是他支持的查询语言非常强大，其语法有点类似于面向对象的查询语言，几乎可以实现类似关系数据库单表查询的绝大部分功能，而且还支持对数据建立索引。Mongo还可以解决海量数据的查询效率，根据官方文档，当数据量达到50GB以上数据时，Mongo数据库访问速度是MySQL10  倍以上。</p>
<p><strong>BSON</strong> BSON是Binary JSON  的简称，是一个JSON文档对象的二进制编码格式。BSON同JSON一样支持往其它文档对象和数组中再插入文档对象和数组，同时扩展了JSON的数据类型。如：BSON有Date类型和BinDate类型。 BSON被比作二进制的交换格式，如同Protocol  Buffers，但BSON比它更“schema-less”，非常好的灵活性但空间占用稍微大一点。 BSON有以下三个特点： 1．   轻量级 2．   跨平台 3．   效率高 <strong>命名空间</strong> MongoDB存储BSON对象到collections,这一系列的数据库名和collection名被称为一个命名空间。如同：java.util.List;用来管理数据库中的数据。</p>
<h3 id="索引"><a href="#索引" class="headerlink" title="索引"></a><strong>索引</strong></h3><p>mongodb可以对某个字段建立索引，可以建立组合索引、唯一索引，也可以删除索引，建立索引就意味着增加空间开销。默认情况下每个表都会有一个唯一索引：_id，如果插入数据时没有指定_id，服务会自动生成一个_id，为了充分利用已有索引，减少空间开销，最好是自己指定一个unique的key为_id，通常用对象的ID比较合适，比如商品的ID。 <strong>shell操作数据库：</strong>   1.   超级用户相关： 1. #进入数据库admin use admin 2. #增加或修改用户密码 db.addUser(‘name’,’pwd’) 3. #查看用户列表 db.system.users.find() 4. #用户认证 db.auth(‘name’,’pwd’) 5. #删除用户 db.removeUser(‘name’) 6.  #查看所有用户 show users 7. #查看所有数据库 show dbs 8. #查看所有的collection show collections 9. #查看各collection的状态 db.printCollectionStats() 10. #查看主从复制状态 db.printReplicationInfo() 11. #修复数据库 db.repairDatabase() 12. #设置记录profiling，0=off 1=slow 2=all db.setProfilingLevel(1) 13. #查看profiling show profile 14. #拷贝数据库 db.copyDatabase(‘mail_addr’,’mail_addr_tmp’) 15. #删除collection db.mail_addr.drop() 16. #删除当前的数据库 db.dropDatabase()   2. 增删改 1.  #存储嵌套的对象 db.foo.save({‘name’:’ysz’,’address’:{‘city’:’beijing’,’post’:100096},’phone’:[138,139]})   2. #存储数组对象 db.user_addr.save({‘Uid’:<a href="mailto:&#39;yushunzhi@sohu.com" target="_blank" rel="noopener">&#39;yushunzhi@sohu.com</a>‘,’Al’:[<a href="mailto:&#39;test-1@sohu.com" target="_blank" rel="noopener">&#39;test-1@sohu.com</a>‘,<a href="mailto:&#39;test-2@sohu.com" target="_blank" rel="noopener">&#39;test-2@sohu.com</a>‘]})   3. #根据query条件修改，如果不存在则插入，允许修改多条记录 db.foo.update({‘yy’:5},{‘$set’:{‘xx’:2}},upsert=true,multi=true) 4. #删除yy=5的记录 db.foo.remove({‘yy’:5}) 5. #删除所有的记录 db.foo.remove()   3. 索引 1. #增加索引：1(ascending),-1(descending) 2. db.foo.ensureIndex({firstname: 1, lastname:  1}, {unique: true}); 3. #索引子对象 4. db.user_addr.ensureIndex({‘Al.Em’:  1}) 5. #查看索引信息 6. db.foo.getIndexes() 7. db.foo.getIndexKeys() 8. #根据索引名删除索引 9. db.user_addr.dropIndex(‘Al.Em_1’)   4. 查询 1. #查找所有 2. db.foo.find() 3. #查找一条记录 4. db.foo.findOne() 5. #根据条件检索10条记录 6. db.foo.find({‘msg’:’Hello 1’}).limit(10) 7. #sort排序 8.  db.deliver_status.find({‘From’:<a href="mailto:&#39;ixigua@sina.com" target="_blank" rel="noopener">&#39;ixigua@sina.com</a>‘}).sort({‘Dt’,-1}) 9.  db.deliver_status.find().sort({‘Ct’:-1}).limit(1) 10. #count操作 11. db.user_addr.count() 12. #distinct操作,查询指定列，去重复 13. db.foo.distinct(‘msg’) 14. #”&gt;=”操作 15. db.foo.find({“timestamp”: {“$gte” : 2}}) 16. #子对象的查找 17. db.foo.find({‘address.city’:’beijing’}) 5. 管理 1. #查看collection数据的大小 2. db.deliver_status.dataSize() 3. #查看colleciont状态 4. db.deliver_status.stats() 5. #查询所有索引的大小 6.  db.deliver_status.totalIndexSize()   5.  advanced queries:高级查询 条件操作符 $gt  : &gt; $lt : &lt; $gte: &gt;= $lte: &lt;= $ne :  !=、&lt;&gt; $in  : in $nin: not in $all: all $not: 反匹配(1.3.3及以上版本) 查询 name &lt;&gt; “bruce” and age &gt;= 18 的数据 db.users.find({name:  {$ne: “bruce”}, age: {$gte: 18}}); 查询 creation_date &gt; ‘2010-01-01’ and creation_date &lt;= ‘2010-12-31’  的数据 db.users.find({creation_date:{$gt:new  Date(2010,0,1), $lte:new Date(2010,11,31)}); 查询 age in (20,22,24,26) 的数据 db.users.find({age:  {$in: [20,22,24,26]}}); 查询 age取模10等于0  的数据 db.users.find(‘this.age  % 10 == 0’); 或者 db.users.find({age  : {$mod : [10, 0]}}); 匹配所有 db.users.find({favorite_number  : {$all : [6, 8]}}); 可以查询出{name:  ‘David’, age: 26, favorite_number: [ 6, 8, 9 ]  } 可以不查询出{name:  ‘David’, age: 26, favorite_number: [ 6, 7, 9 ]  } 查询不匹配name=B<em>带头的记录 db.users.find({name:  {$not: /^B.</em>/}}); 查询 age取模10不等于0  的数据 db.users.find({age  : {$not: {$mod : [10, 0]}}}); #返回部分字段 选择返回age和_id字段(_id字段总是会被返回) db.users.find({},  {age:1}); db.users.find({}, {age:3}); db.users.find({},  {age:true}); db.users.find({ name : “bruce” },  {age:1}); 0为false,  非0为true 选择返回age、address和_id字段 db.users.find({  name : “bruce” }, {age:1, address:1}); 排除返回age、address和_id字段 db.users.find({},  {age:0, address:false}); db.users.find({ name : “bruce” }, {age:0,  address:false}); 数组元素个数判断 对于{name:  ‘David’, age: 26, favorite_number: [ 6, 7, 9 ] }记录 匹配db.users.find({favorite_number:  {$size: 3}}); 不匹配db.users.find({favorite_number:  {$size: 2}}); $exists判断字段是否存在 查询所有存在name字段的记录 db.users.find({name:  {$exists: true}}); 查询所有不存在phone字段的记录 db.users.find({phone:  {$exists: false}}); $type判断字段类型 查询所有name字段是字符类型的 db.users.find({name:  {$type: 2}}); 查询所有age字段是整型的 db.users.find({age:  {$type: 16}}); 对于字符字段，可以使用正则表达式 查询以字母b或者B带头的所有记录 db.users.find({name:  /^b.<em>/i}); $elemMatch(1.3.1及以上版本) 为数组的字段中匹配其中某个元素 Javascript查询和$where查询 查询 age &gt; 18 的记录，以下查询都一样 db.users.find({age:  {$gt: 18}}); db.users.find({$where: “this.age &gt;  18”}); db.users.find(“this.age &gt; 18”); f = function() {return  this.age &gt; 18} db.users.find(f); 排序sort() 以年龄升序asc db.users.find().sort({age:  1}); 以年龄降序desc db.users.find().sort({age:  -1}); 限制返回记录数量limit() 返回5条记录 db.users.find().limit(5); 返回3条记录并打印信息 db.users.find().limit(3).forEach(function(user)  {print(‘my age is ‘ + user.age)}); 结果 my  age is 18 my age is 19 my age is  20 限制返回记录的开始点skip() 从第3条记录开始，返回5条记录(limit  3,  5) db.users.find().skip(3).limit(5); 查询记录条数count() db.users.find().count(); db.users.find({age:18}).count(); 以下返回的不是5，而是user表中所有的记录数量 db.users.find().skip(10).limit(5).count(); 如果要返回限制之后的记录数量，要使用count(true)或者count(非0) db.users.find().skip(10).limit(5).count(true); 分组group() 假设test表只有以下一条数据 {  domain: “<a href="http://www.mongodb.org&quot;" target="_blank" rel="noopener">www.mongodb.org&quot;</a> , invoked_at: {d:”2009-11-03”, t:”17:14:05”} ,  response_time: 0.05 , http_action: “GET  /display/DOCS/Aggregation” } 使用group统计test表11月份的数据count:count(</em>)、total_time:sum(response_time)、avg_time:total_time/count; db.test.group( {  cond: {“invoked_at.d”: {$gt: “2009-11”, $lt: “2009-12”}} , key:  {http_action: true} , initial: {count: 0, total_time:0} , reduce:  function(doc, out){ out.count++; out.total_time+=doc.response_time } ,  finalize: function(out){ out.avg_time = out.total_time / out.count } }  ); [ { “http_action” : “GET  /display/DOCS/Aggregation”, “count” : 1, “total_time” :  0.05, “avg_time” : 0.05 } ] </p>
<p><strong>Java  应用示例</strong></p>
<p>要使用Java操作MongoDB的话，要到官方网站下载一个驱动包，把包导入后，可以尝试来操作了（记得一定要开着服务器）</p>
<p>首先介绍一下比较常用的几个类</p>
<p><strong>Mongo</strong>：连接服务器，执行一些数据库操作的选项，如新建立一个数据库等</p>
<p><strong>DB</strong>：对应一个数据库，可以用来建立集合等操作</p>
<p><strong>DBCollection</strong>：对应一个集合（类似表），可能是我们用得最多的，可以添加删除记录等</p>
<p><strong>DBObjec</strong>：接口和BasicDBObject对象：表示一个具体的记录，BasicDBObject实现了DBObject，因为是key-value的数据结构，所以用起来其实和HashMap是基本一致的</p>
<p><strong>DBCursor</strong>：用来遍历取得的数据，实现了Iterable和Iterator</p>
<p>接下来实际的操作一下，代码如下：</p>
<ol>
<li><p>import java.net.UnknownHostException;</p>
</li>
<li><p>import java.util.List;</p>
</li>
<li><p>import java.util.Set;</p>
</li>
<li><p>import com.mongodb.BasicDBObject;</p>
</li>
<li><p>import com.mongodb.DB;</p>
</li>
<li><p>import com.mongodb.DBCollection;</p>
</li>
<li><p>import com.mongodb.DBCursor;</p>
</li>
<li><p>import com.mongodb.DBObject;</p>
</li>
<li><p>import com.mongodb.Mongo;</p>
</li>
<li><p>import com.mongodb.MongoException;</p>
</li>
<li><p>public class MongoDbTest {</p>
</li>
<li><p>public static void main(String[] args)  throws UnknownHostException, MongoException {</p>
</li>
<li><p>//Mongo m = new  Mongo(); </p>
</li>
<li><p>//Mongo m = new Mongo(“localhost”); </p>
</li>
<li><p>//获得数据库服务</p>
</li>
<li><p>Mongo m = new Mongo(“localhost”, 27017);</p>
</li>
<li><p>//得到数据库mytest</p>
</li>
<li><p>DB db = m.getDB(“mytest”);</p>
</li>
<li><p>//得到mytest数据库下所有表名</p>
</li>
<li><p>Set<string> colls =  db.getCollectionNames();</string></p>
</li>
<li><p>for (String s : colls) {</p>
</li>
<li><p>System.out.println(s);</p>
</li>
<li><p>}</p>
</li>
<li><p>//得到testCollection表</p>
</li>
<li><p>DBCollection coll = db.getCollection(“testCollection”);</p>
</li>
<li><p>//new 一个BasicDBObject对象doc</p>
</li>
<li><p>BasicDBObject doc = new BasicDBObject();</p>
</li>
<li><p>//赋值</p>
</li>
<li><p>doc.put(“name”, “MongoDB”);</p>
</li>
<li><p>doc.put(“type”, “database”);</p>
</li>
<li><p>doc.put(“count”, 1);</p>
</li>
<li><p>//又new  一个BasicDBObject对象info</p>
</li>
<li><p>BasicDBObject info = new BasicDBObject();</p>
</li>
<li><p>info.put(“x”, 203);</p>
</li>
<li><p>info.put(“y”, 102);</p>
</li>
<li><p>//把info放入doc</p>
</li>
<li><p>doc.put(“info”, info);</p>
</li>
<li><p>//向testCollection表中插入一条数据</p>
</li>
<li><p>coll.insert(doc);</p>
</li>
<li><p>//查询一条数据</p>
</li>
<li><p>DBObject myDoc = coll.findOne();</p>
</li>
<li><p>System.out.println(myDoc);</p>
</li>
<li><p>//循环插入100条数据到testCollection</p>
</li>
<li><p>for (int i=0; i &lt; 100; i++)  {</p>
</li>
<li><p>coll.insert(new BasicDBObject().append(“i”,  i));</p>
</li>
<li><p>}</p>
</li>
<li><p>//Counting Documents in  A Collection </p>
</li>
<li><p>System.out.println(coll.getCount());</p>
</li>
<li><p>//Using a Cursor to Get  All the Documents </p>
</li>
<li><p>DBCursor cur = coll.find();</p>
</li>
<li><p>while(cur.hasNext()) {</p>
</li>
<li>}</li>
</ol>

            
            <p class="more">
                <a href="/2015/09/06/2019030500056/">阅读剩下更多</a>
            </p>
        </div>
        <div class="post-thumbnail" data-img>
            <a href="/2015/09/06/2019030500056/" title="mongodb常用命令">
                
                    <img class="thumbnail" src="/img/default.png" data-echo="/img/thumbnail/6.jpg" alt="默认配图">
                
            </a>
        </div>
    </div>
</article>

    
        <!-- 文章列表 item -->
<article class="post">
    <header>
        <!-- 标签这有且只能显示一个 -->
        
        <a class="cat-link" href="/categories/SQL-Server/">SQL Server</a>
        
        <!-- 文章标题 -->
        
    <h3 class="post-title">
    	<a href="/2015/09/01/2019030500162/">
    		SQL Server 2012 未将对象引用设置到对象的实例。
    	</a>
    </h3>

    </header>
    <p class="post-meta">
        Jelon 发表于
        <time datetime="2015-09-01T07:54:53.000Z">2015-09-01</time>
        &nbsp;&nbsp;
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/SQL-Server/" title="SQL Server">SQL Server</a>
    

        </span>
    </p>

    <div class="post-content">
        <div class="post-excerpt">
            
                <blockquote>
<p>1、错误描述 <img src="http://img.blog.csdn.net/20150831214339516?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt> <img src="http://img.blog.csdn.net/20150831214354172?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt> 2、错误原因 创建了student数据库后，使用数据库时出现语法错误 use student; 3、解决办法 （1）重装SQL Server 2012</p>
</blockquote>

            
            <p class="more">
                <a href="/2015/09/01/2019030500162/">阅读剩下更多</a>
            </p>
        </div>
        <div class="post-thumbnail" data-img>
            <a href="/2015/09/01/2019030500162/" title="SQL Server 2012 未将对象引用设置到对象的实例。">
                
                    <img class="thumbnail" src="/img/default.png" data-echo="/img/thumbnail/1.jpg" alt="默认配图">
                
            </a>
        </div>
    </div>
</article>

    
        <!-- 文章列表 item -->
<article class="post">
    <header>
        <!-- 标签这有且只能显示一个 -->
        
        <a class="cat-link" href="/categories/MySQL/">MySQL</a>
        
        <!-- 文章标题 -->
        
    <h3 class="post-title">
    	<a href="/2015/09/01/2019030500117/">
    		mysql5.6和mysql5.7分配undo回滚段的区别
    	</a>
    </h3>

    </header>
    <p class="post-meta">
        Jelon 发表于
        <time datetime="2015-09-01T07:36:52.000Z">2015-09-01</time>
        &nbsp;&nbsp;
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/mysql5-6/" title="mysql5.6">mysql5.6</a> / 
    
        <a href="/tags/mysql5-7/" title="mysql5.7">mysql5.7</a> / 
    
        <a href="/tags/undo/" title="undo">undo</a>
    

        </span>
    </p>

    <div class="post-content">
        <div class="post-excerpt">
            
                <p>1、mysql5.7中分为2类：临时表空间回滚段和普通回滚段。 2、mysql5.6中没有区分。 As of <strong>MySQL 5.7.2</strong>, 32 undo logs are reserved for use by temporary tables and are hosted in the temporary table tablespace (<code>ibtmp1</code>). To allocate additional undo logs for data-modifying transactions that generate undo records,<code>innodb_undo_logs</code> must be set to a value greater than 32 if undo logs are stored in the system tablespace only. If you have configured separate undo tablespaces, <code>innodb_undo_logs</code> must be set to a value greater than 33 to allocate additional undo logs for data-modifying transactions. Each undo log can host up to a maximum of 1024 transactions. 如果undo log存储在系统表空间，innodb_undo_logs值必须大于32 否则独立存储的话必须大于3。 参考： <a href="http://www.tuicool.com/articles/IzQNRrz" target="_blank" rel="noopener">http://www.tuicool.com/articles/IzQNRrz</a> <a href="http://dev.mysql.com/doc/refman/5.7/en/innodb-parameters.html#sysvar\_innodb\_undo\_logs" target="_blank" rel="noopener">http://dev.mysql.com/doc/refman/5.7/en/innodb-parameters.html#sysvar\_innodb\_undo\_logs</a> <a href="http://dev.mysql.com/doc/refman/5.6/en/innodb-parameters.html#sysvar\_innodb\_undo\_logs" target="_blank" rel="noopener">http://dev.mysql.com/doc/refman/5.6/en/innodb-parameters.html#sysvar\_innodb\_undo\_logs</a> <a href="http://bbs.aliyun.com/read/244045.html?spm=5176.7189909.0.0.AB00as" target="_blank" rel="noopener">http://bbs.aliyun.com/read/244045.html?spm=5176.7189909.0.0.AB00as</a></p>

            
            <p class="more">
                <a href="/2015/09/01/2019030500117/">阅读剩下更多</a>
            </p>
        </div>
        <div class="post-thumbnail" data-img>
            <a href="/2015/09/01/2019030500117/" title="mysql5.6和mysql5.7分配undo回滚段的区别">
                
                    <img class="thumbnail" src="/img/default.png" data-echo="/img/thumbnail/1.jpg" alt="默认配图">
                
            </a>
        </div>
    </div>
</article>

    
        <!-- 文章列表 item -->
<article class="post">
    <header>
        <!-- 标签这有且只能显示一个 -->
        
        <a class="cat-link" href="/categories/MySQL/">MySQL</a>
        
        <!-- 文章标题 -->
        
    <h3 class="post-title">
    	<a href="/2015/09/01/2019030500077/">
    		mysql备份与还原
    	</a>
    </h3>

    </header>
    <p class="post-meta">
        Jelon 发表于
        <time datetime="2015-09-01T07:35:13.000Z">2015-09-01</time>
        &nbsp;&nbsp;
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/MySQL/" title="MySQL">MySQL</a> / 
    
        <a href="/tags/数据库/" title="数据库">数据库</a> / 
    
        <a href="/tags/mysqldump/" title="mysqldump">mysqldump</a> / 
    
        <a href="/tags/mysql备份/" title="mysql备份">mysql备份</a> / 
    
        <a href="/tags/mysql还原/" title="mysql还原">mysql还原</a>
    

        </span>
    </p>

    <div class="post-content">
        <div class="post-excerpt">
            
                <blockquote>
<h1 id="1-mysqldump"><a href="#1-mysqldump" class="headerlink" title="1.mysqldump"></a>1.mysqldump</h1><h2 id="1-1-备份方法："><a href="#1-1-备份方法：" class="headerlink" title="1.1.备份方法："></a>1.1.备份方法：</h2><p>（1）导出整个数据库并指定字符集(包括数据库中的数据）</p>
<pre><code>mysqldump -u root -p --default-character-set=utf8 dbname &gt; 存放路径 
</code></pre><p>（2）导出数据库结构（不含数据）</p>
<pre><code>mysqldump -u username -p -d dbname &gt; dbname.sql    
</code></pre><p>（3）导出数据库中的某张数据表（包含数据）</p>
<pre><code>mysqldump -u username -p dbname tablename &gt; tablename.sql    
</code></pre><p>（4）导出数据库中的某张数据表的表结构（不含数据）</p>
<pre><code>mysqldump -u username -p -d dbname tablename &gt; tablename.sql
</code></pre><h2 id="1-2-mysqldump常用参数"><a href="#1-2-mysqldump常用参数" class="headerlink" title="1.2.mysqldump常用参数"></a>1.2.mysqldump常用参数</h2><blockquote>
<p>–compatible=name 它告诉 mysqldump，导出的数据将和哪种数据库或哪个旧版本的 MySQL 服务器相兼容。值可以为 ansi、mysql323、mysql40、postgresql、oracle、mssql、db2、maxdb、no_key_options、no_tables_options、no_field_options 等，要使用几个值，用逗号将它们隔开。当然了，它并不保证能完全兼容，而是尽量兼容。</p>
<hr>
<p>–all-databases , -A 导出全部数据库mysqldump -uroot -p –all-databases</p>
<hr>
<p>–all-tablespaces , -Y导出全部表空间。mysqldump -uroot -p –all-databases</p>
<hr>
<p>–all-tablespaces–no-tablespaces , -y不导出任何表空间信息。mysqldump -uroot -p –all-databases –no-tablespaces</p>
<hr>
<p>–add-drop-database每个数据库创建之前添加drop数据库语句。mysqldump -uroot -p –all-databases –add-drop-database</p>
<hr>
<p>–add-drop-table每个数据表创建之前添加drop数据表语句。(默认为打开状态，使用–skip-add-drop-table取消选项)mysqldump -uroot -p –all-databases (默认添加drop语句)mysqldump -uroot -p –all-databases –skip-add-drop-table (取消drop语句)</p>
<hr>
<p>–add-locks在每个表导出之前增加LOCK TABLES并且之后UNLOCK TABLE。(默认为打开状态，使用–skip-add-locks取消选项)mysqldump -uroot -p –all-databases (默认添加LOCK语句)mysqldump -uroot -p –all-databases –skip-add-locks (取消LOCK语句)</p>
<hr>
<p>–comments附加注释信息。默认为打开，可以用–skip-comments取消mysqldump -uroot -p –all-databases (默认记录注释)mysqldump -uroot -p –all-databases –skip-comments (取消注释)</p>
<hr>
<p>–compact导出更少的输出信息(用于调试)。去掉注释和头尾等结构。可以使用选项：–skip-add-drop-table –skip-add-locks –skip-comments –skip-disable-keysmysqldump -uroot -p –all-databases –compact</p>
<hr>
<p>–complete-insert, -c使用完整的insert语句(包含列名称)。这么做能提高插入效率，但是可能会受到max_allowed_packet参数的影响而导致插入失败。mysqldump -uroot -p –all-databases –complete-insert</p>
<hr>
<p>–compress, -C在客户端和服务器之间启用压缩传递所有信息mysqldump -uroot -p –all-databases –compress</p>
<hr>
<p>–databases, -B导出几个数据库。参数后面所有名字参量都被看作数据库名。mysqldump -uroot -p –databases test mysql</p>
<hr>
<p>–debug输出debug信息，用于调试。默认值为：d:t:o,/tmp/mysqldump.tracemysqldump -uroot -p –all-databases –debugmysqldump -uroot -p –all-databases –debug=” d:t:o,/tmp/debug.trace”</p>
<hr>
<p>–debug-info输出调试信息并退出mysqldump -uroot -p –all-databases –debug-info</p>
<hr>
<p>–default-character-set设置默认字符集，默认值为utf8mysqldump -uroot -p –all-databases –default-character-set=latin1</p>
<hr>
<p>–delayed-insert采用延时插入方式（INSERT DELAYED）导出数据mysqldump -uroot -p –all-databases –delayed-insert</p>
<hr>
<p>–events, -E导出事件。mysqldump -uroot -p –all-databases –events</p>
<hr>
<p>–flush-logs开始导出之前刷新日志。请注意：假如一次导出多个数据库(使用选项–databases或者–all-databases)，将会逐个数据库刷新日志。除使用–lock-all-tables或者–master-data外。在这种情况下，日志将会被刷新一次，相应的所以表同时被锁定。因此，如果打算同时导出和刷新日志应该使用–lock-all-tables 或者–master-data 和–flush-logs。mysqldump -uroot -p –all-databases –flush-logs</p>
<hr>
<p>–flush-privileges在导出mysql数据库之后，发出一条FLUSH PRIVILEGES 语句。为了正确恢复，该选项应该用于导出mysql数据库和依赖mysql数据库数据的任何时候。mysqldump -uroot -p –all-databases –flush-privileges</p>
<hr>
<p>–force在导出过程中忽略出现的SQL错误。mysqldump -uroot -p –all-databases –force</p>
<hr>
<p>–host, -h需要导出的主机信息mysqldump -uroot -p –host=localhost –all-databases</p>
<hr>
<p>–ignore-table不导出指定表。指定忽略多个表时，需要重复多次，每次一个表。每个表必须同时指定数据库和表名。例如：–ignore-table=database.table1 –ignore-table=database.table2 ……mysqldump -uroot -p –host=localhost –all-databases –ignore-table=mysql.user</p>
<hr>
<p>–lock-all-tables, -x提交请求锁定所有数据库中的所有表，以保证数据的一致性。这是一个全局读锁，并且自动关闭–single-transaction 和–lock-tables 选项。mysqldump -uroot -p –host=localhost –all-databases –lock-all-tables</p>
<hr>
<p>–lock-tables, -l开始导出前，锁定所有表。用READ LOCAL锁定表以允许MyISAM表并行插入。对于支持事务的表例如InnoDB和BDB，–single-transaction是一个更好的选择，因为它根本不需要锁定表。请注意当导出多个数据库时，–lock-tables分别为每个数据库锁定表。因此，该选项不能保证导出文件中的表在数据库之间的逻辑一致性。不同数据库表的导出状态可以完全不同。mysqldump -uroot -p –host=localhost –all-databases –lock-tables</p>
<hr>
<p>–no-create-db, -n只导出数据，而不添加CREATE DATABASE 语句。mysqldump -uroot -p –host=localhost –all-databases –no-create-db</p>
<hr>
<p>–no-create-info, -t只导出数据，而不添加CREATE TABLE 语句。mysqldump -uroot -p –host=localhost –all-databases –no-create-info</p>
<hr>
<p>–no-data, -d不导出任何数据，只导出数据库表结构。mysqldump -uroot -p –host=localhost –all-databases –no-data</p>
<hr>
<p>–opt 这只是一个快捷选项，等同于同时添加 –add-drop-tables –add-locking –create-option –disable-keys –extended-insert –lock-tables –quick –set-charset 选项。本选项能让 mysqldump 很快的导出数据，并且导出的数据能很快导回。该选项默认开启，但可以用 –skip-opt 禁用。注意，如果运行 mysqldump 没有指定 –quick 或 –opt 选项，则会将整个结果集放在内存中。如果导出大数据库的话可能会出现问题</p>
</blockquote>
<h2 id="1-3-还原"><a href="#1-3-还原" class="headerlink" title="1.3.还原"></a>1.3.还原</h2><p>转载或分享请标明地址:<a href="http://blog.csdn.net/w19981220" target="_blank" rel="noopener">http://blog.csdn.net/w19981220</a> mysqldump -u用户名 -p密码 数据库 &lt; 路径 mysql -uroot -p1234 数据库名称&lt;路径 还可以使用这一种方法 首先先use 那一个数据库</p>
<pre><code>mysql&gt; source sql文件路径
</code></pre></blockquote>

            
            <p class="more">
                <a href="/2015/09/01/2019030500077/">阅读剩下更多</a>
            </p>
        </div>
        <div class="post-thumbnail" data-img>
            <a href="/2015/09/01/2019030500077/" title="mysql备份与还原">
                
                    <img class="thumbnail" src="/img/default.png" data-echo="/img/thumbnail/1.jpg" alt="默认配图">
                
            </a>
        </div>
    </div>
</article>

    
        <!-- 文章列表 item -->
<article class="post">
    <header>
        <!-- 标签这有且只能显示一个 -->
        
        <a class="cat-link" href="/categories/Oracle/">Oracle</a>
        
        <!-- 文章标题 -->
        
    <h3 class="post-title">
    	<a href="/2015/09/01/2019030500151/">
    		plsql导出导入
    	</a>
    </h3>

    </header>
    <p class="post-meta">
        Jelon 发表于
        <time datetime="2015-09-01T07:29:02.000Z">2015-09-01</time>
        &nbsp;&nbsp;
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/PL-SQL/" title="PL/SQL">PL/SQL</a>
    

        </span>
    </p>

    <div class="post-content">
        <div class="post-excerpt">
            
                <p>导出步骤： 1 tools -&gt;export user object 选择选项，导出.sql文件 2 tools -&gt;export tables-&gt; Oracle Export 选择选项导出.dmp文件 导入步骤： 1 tools-&gt;import tables-&gt;SQL Inserts 导入.sql文件 2 tools-&gt;import talbes-&gt;Oracle Import然后再导入dmp文件 数据库的导入导出成功 =======================解释===================================================================== Tools-&gt;Export User Objects导出的是建表语句（包括存储结构） Tools-&gt;Export Tables里面包含三种导出方式： 三种方式都能导出表结构以及数据，网上说三种方法有区别，如下： Oracle Export，Sql Insert，pl/sql developer 第一种是导出为.dmp的文件格式，.dmp文件是二进制的，可以跨平台，还能包含权限，效率也很不错，用得最广 第二种是导出为.sql文件的，可用文本编辑器查看，通用性比较好，但效率不如第一种，适合小数据量导入导出。尤其注意的是表中不能有大字段（blob,clob,long），如果有，会提示不能导出(提示如下： table contains one or more LONG columns cannot export in sql format,user Pl/sql developer format instead)，可以用第一种和第三种方式导出。 第三种是导出为.pde格式的，.pde为Pl/sql developer自有的文件格式，只能用Pl/sql developer自己导入导出；不能用编辑器查看。</p>

            
            <p class="more">
                <a href="/2015/09/01/2019030500151/">阅读剩下更多</a>
            </p>
        </div>
        <div class="post-thumbnail" data-img>
            <a href="/2015/09/01/2019030500151/" title="plsql导出导入">
                
                    <img class="thumbnail" src="/img/default.png" data-echo="/img/thumbnail/1.jpg" alt="默认配图">
                
            </a>
        </div>
    </div>
</article>

    

    
    <nav class="page-navigator">
        <a class="extend prev" rel="prev" href="/archives/2015/09/">前一页</a><a class="page-number" href="/archives/2015/09/">1</a><span class="page-number current">2</span>
    </nav>
    


            </div>

        </section>
        <!-- 侧栏部分 -->
<aside class="sidebar">
    <section class="widget">
        <h3 class="widget-hd"><strong>文章分类</strong></h3>
        <!-- 文章分类 -->
<ul class="widget-bd">
    
    <li>
        <a href="/categories/MySQL/">MySQL</a>
        <span class="badge">(92)</span>
    </li>
    
    <li>
        <a href="/categories/Oracle/">Oracle</a>
        <span class="badge">(40)</span>
    </li>
    
    <li>
        <a href="/categories/NOSQL/">NOSQL</a>
        <span class="badge">(17)</span>
    </li>
    
    <li>
        <a href="/categories/开发语言/">开发语言</a>
        <span class="badge">(7)</span>
    </li>
    
    <li>
        <a href="/categories/SQL-Server/">SQL Server</a>
        <span class="badge">(13)</span>
    </li>
    
    <li>
        <a href="/categories/其他数据库/">其他数据库</a>
        <span class="badge">(4)</span>
    </li>
    
    <li>
        <a href="/categories/MySQL/Oracle/">Oracle</a>
        <span class="badge">(3)</span>
    </li>
    
    <li>
        <a href="/categories/MySQL/Oracle/SQL-Server/">SQL Server</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="/categories/NOSQL/开发语言/">开发语言</a>
        <span class="badge">(1)</span>
    </li>
    
</ul>
    </section>

    
    <section class="widget">
        <h3 class="widget-hd"><strong>热门标签</strong></h3>
        <!-- 文章标签 -->
<div class="widget-bd tag-wrap">
  
    <a class="tag-item" href="/tags/MySQL/" title="MySQL">MySQL (71)</a>
  
    <a class="tag-item" href="/tags/位运算/" title="位运算">位运算 (0)</a>
  
    <a class="tag-item" href="/tags/sqlplus/" title="sqlplus">sqlplus (1)</a>
  
    <a class="tag-item" href="/tags/PL-SQL/" title="PL/SQL">PL/SQL (5)</a>
  
    <a class="tag-item" href="/tags/数据库/" title="数据库">数据库 (7)</a>
  
    <a class="tag-item" href="/tags/视图/" title="视图">视图 (1)</a>
  
    <a class="tag-item" href="/tags/B-Tree/" title="B+Tree">B+Tree (1)</a>
  
    <a class="tag-item" href="/tags/索引/" title="索引">索引 (1)</a>
  
    <a class="tag-item" href="/tags/redis/" title="redis">redis (6)</a>
  
    <a class="tag-item" href="/tags/SSDB/" title="SSDB">SSDB (1)</a>
  
    <a class="tag-item" href="/tags/SQL/" title="SQL">SQL (17)</a>
  
    <a class="tag-item" href="/tags/ORA-00600/" title="ORA-00600">ORA-00600 (1)</a>
  
    <a class="tag-item" href="/tags/存储过程/" title="存储过程">存储过程 (3)</a>
  
    <a class="tag-item" href="/tags/CentOS/" title="CentOS">CentOS (2)</a>
  
    <a class="tag-item" href="/tags/allow/" title="allow">allow (1)</a>
  
    <a class="tag-item" href="/tags/Apache/" title="Apache">Apache (1)</a>
  
    <a class="tag-item" href="/tags/deny/" title="deny">deny (1)</a>
  
    <a class="tag-item" href="/tags/druid/" title="druid">druid (1)</a>
  
    <a class="tag-item" href="/tags/心跳/" title="心跳">心跳 (1)</a>
  
    <a class="tag-item" href="/tags/事务/" title="事务">事务 (5)</a>
  
    <a class="tag-item" href="/tags/分布式/" title="分布式">分布式 (1)</a>
  
    <a class="tag-item" href="/tags/消息/" title="消息">消息 (1)</a>
  
    <a class="tag-item" href="/tags/KeepAlived/" title="KeepAlived">KeepAlived (1)</a>
  
    <a class="tag-item" href="/tags/Oracle/" title="Oracle">Oracle (30)</a>
  
    <a class="tag-item" href="/tags/schedule-job/" title="schedule job">schedule job (1)</a>
  
    <a class="tag-item" href="/tags/分库/" title="分库">分库 (1)</a>
  
    <a class="tag-item" href="/tags/分库分表/" title="分库分表">分库分表 (1)</a>
  
    <a class="tag-item" href="/tags/分表/" title="分表">分表 (1)</a>
  
    <a class="tag-item" href="/tags/结构同步/" title="结构同步">结构同步 (1)</a>
  
    <a class="tag-item" href="/tags/批量/" title="批量">批量 (1)</a>
  
    <a class="tag-item" href="/tags/truncate/" title="truncate">truncate (1)</a>
  
    <a class="tag-item" href="/tags/Hash索引/" title="Hash索引">Hash索引 (1)</a>
  
    <a class="tag-item" href="/tags/InnoDB/" title="InnoDB">InnoDB (3)</a>
  
    <a class="tag-item" href="/tags/MyISAM/" title="MyISAM">MyISAM (3)</a>
  
    <a class="tag-item" href="/tags/索引优化/" title="索引优化">索引优化 (1)</a>
  
    <a class="tag-item" href="/tags/FineReport/" title="FineReport">FineReport (1)</a>
  
    <a class="tag-item" href="/tags/报表/" title="报表">报表 (1)</a>
  
    <a class="tag-item" href="/tags/数据集/" title="数据集">数据集 (1)</a>
  
    <a class="tag-item" href="/tags/Excel/" title="Excel">Excel (1)</a>
  
</div>
    </section>
    

    

    
    <!-- 友情链接 -->
    <section class="widget">
        <h3 class="widget-hd"><strong>友情链接</strong></h3>
        <!-- 文章分类 -->
<ul class="widget-bd">
    
        <li>
            <a href="https://jelon.top" target="_blank" title="Jelon个人前端小站">前端博客小站</a>
        </li>
    
        <li>
            <a href="https://www.baidu.com" target="_blank" title="百度搜索">百度</a>
        </li>
    
</ul>
    </section>
    
</aside>
<!-- / 侧栏部分 -->
    </div>

    <!-- 博客底部 -->
    <footer class="footer">
    &copy;
    
        2016-2019
    

    <a href="/">Jelon Loves You</a>
</footer>
<div class="back-to-top" id="JELON__backToTop" title="返回顶部">返回顶部</div>

    <!--博客js脚本 -->
    <!-- 这里放网站js脚本 -->
<script src="/js/main.js"></script>
</body>
</html>